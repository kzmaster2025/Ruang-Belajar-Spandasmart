<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Pembelajaran IPS - SMP Negeri 2 Kota Sukabumi</title>
    <meta name="description" content="Media Pembelajaran Interaktif IPS untuk Siswa Kelas VIII SMP Negeri 2 Kota Sukabumi - Tahun Ajaran 2025/2026">
    <meta name="keywords" content="IPS, pembelajaran, SMP, Sukabumi, geografi, sumber daya alam, interaktif">
    <meta name="author" content="Engkus Kusnandar, CCNA, S.E, Gr">
    
    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta property="og:title" content="Media Pembelajaran IPS - SMP Negeri 2 Sukabumi">
    <meta property="og:description" content="Platform pembelajaran interaktif IPS dengan fitur quiz, tracking progress, dan database multi-device">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-username.github.io/media-pembelajaran-ips/">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0iIzE5NzNBQSIvPgo8dGV4dCB4PSIxNiIgeT0iMjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JUFM8L3RleHQ+Cjwvc3ZnPgo=">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f9ff;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
        .tab {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .tab.active {
            background-color: #1e40af;
            color: white;
        }
        .quiz-option {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .quiz-option:hover {
            background-color: #dbeafe;
        }
        .quiz-option.selected {
            background-color: #93c5fd;
        }
        .quiz-option.correct {
            background-color: #86efac;
        }
        .quiz-option.incorrect {
            background-color: #fca5a5;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .accordion-content.active {
            max-height: 1000px;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-blue-100 min-h-screen">
    <header class="bg-gradient-to-r from-blue-800 to-blue-600 text-white p-6 shadow-lg">
        <div class="container mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold">Media Pembelajaran IPS</h1>
                    <h2 class="text-lg md:text-xl">SMP Negeri 2 Kota Sukabumi</h2>
                    <p class="text-sm md:text-base">Tahun Ajaran 2025/2026</p>
                </div>
                <div class="mt-4 md:mt-0">
                    <p class="text-sm md:text-base">Penyusun: Engkus Kusnandar, CCNA, S.E, Gr</p>
                </div>
            </div>
        </div>
    </header>

    <nav class="bg-white shadow-md p-4 sticky top-0 z-10">
        <div class="container mx-auto">
            <div class="flex flex-wrap justify-center gap-2">
                <button class="tab active px-3 py-2 rounded-lg text-sm md:text-base" data-target="home">Beranda</button>
                <button class="tab px-3 py-2 rounded-lg text-sm md:text-base" data-target="materi1">Materi 1</button>
                <button class="tab px-3 py-2 rounded-lg text-sm md:text-base" data-target="materi2">Materi 2</button>
                <button class="tab px-3 py-2 rounded-lg text-sm md:text-base" data-target="materi3">Materi 3</button>
                <button class="tab px-3 py-2 rounded-lg text-sm md:text-base" data-target="materi4">Materi 4</button>
                <button class="tab px-3 py-2 rounded-lg text-sm md:text-base" data-target="materi5">Materi 5</button>
                <button class="tab px-3 py-2 rounded-lg text-sm md:text-base" data-target="evaluasi">Evaluasi</button>
                <button class="tab px-3 py-2 rounded-lg text-sm md:text-base" data-target="refleksi">Refleksi</button>
                <button class="tab px-3 py-2 rounded-lg text-sm md:text-base" data-target="laporan">Laporan Progress</button>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-6">
        <!-- Halaman Beranda -->
        <div class="page active" id="home">
            <!-- Student Information Form -->
            <div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl shadow-lg p-6 mb-6 text-white">
                <h2 class="text-xl font-bold mb-4">Identitas Siswa</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Nama Lengkap</label>
                        <input type="text" id="studentName" class="w-full p-2 rounded-lg text-gray-800" placeholder="Masukkan nama lengkap">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Kelas</label>
                        <select id="studentClass" class="w-full p-2 rounded-lg text-gray-800">
                            <option value="">Pilih Kelas</option>
                            <option value="8A">8A</option>
                            <option value="8B">8B</option>
                            <option value="8C">8C</option>
                            <option value="8D">8D</option>
                            <option value="8E">8E</option>
                            <option value="8F">8F</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">NIS</label>
                        <input type="text" id="studentNIS" class="w-full p-2 rounded-lg text-gray-800" placeholder="Nomor Induk Siswa">
                    </div>
                </div>
                <div class="mt-4 space-x-2">
                    <button onclick="saveStudentInfo()" class="bg-white text-blue-700 px-6 py-2 rounded-lg font-semibold hover:bg-blue-50 transition-colors">
                        Simpan Data Siswa
                    </button>
                    <button onclick="testSaveFunction()" class="bg-yellow-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-yellow-600 transition-colors">
                        üîß Test Save
                    </button>
                    <button onclick="checkStoredData()" class="bg-green-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-600 transition-colors">
                        üìä Cek Data
                    </button>
                    <button onclick="manualSyncToCloud()" class="bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-purple-600 transition-colors">
                        ‚òÅÔ∏è Sync Cloud
                    </button>
                </div>
                
                <!-- Cloud Sync Status -->
                <div class="mt-4 p-3 bg-gray-50 rounded-lg border" id="cloudStatus">
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-gray-400 rounded-full mr-2" id="cloudIndicator"></div>
                        <span class="text-sm text-gray-600" id="cloudStatusText">Status Cloud: Belum terhubung</span>
                    </div>
                    <div class="text-xs text-gray-500 mt-1" id="lastSyncTime">Terakhir sync: -</div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-blue-800 mb-4">Selamat Datang di Media Pembelajaran IPS</h2>
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="md:w-2/3">
                        <p class="mb-4">Media pembelajaran ini dirancang untuk membantu siswa memahami materi Ilmu Pengetahuan Sosial (IPS) dengan pendekatan yang interaktif dan menarik.</p>
                        
                        <h3 class="text-xl font-semibold text-blue-700 mb-2">Kompetensi yang akan Dipelajari:</h3>
                        <ol class="list-decimal pl-6 mb-4 space-y-2">
                            <li>Menganalisis karakteristik geografis dan keragaman alam Indonesia</li>
                            <li>Menganalisis pemanfaatan sumber daya alam Indonesia</li>
                            <li>Merancang upaya meningkatkan kualitas sumber daya manusia di Indonesia</li>
                            <li>Menganalisis peran lembaga sosial dalam pemanfaatan sumber daya alam dan sumber daya manusia</li>
                            <li>Menghubungkan kondisi geografis dengan kegiatan ekonomi masyarakat pada masa lalu dan asal mula kedatangan Hindu-Buddha di Indonesia</li>
                        </ol>
                        
                        <h3 class="text-xl font-semibold text-blue-700 mb-2">Dimensi Profil Pelajar Pancasila:</h3>
                        <ul class="list-disc pl-6 mb-4 space-y-2">
                            <li>Beriman, bertakwa kepada Tuhan yang Maha Esa dan berakhlak mulia kepada lingkungan</li>
                            <li>Berpikir kritis</li>
                            <li>Mandiri dalam kegiatan pembelajaran dan mengerjakan tugas individu</li>
                            <li>Gotong-royong dengan berkolaborasi bersama teman dalam kegiatan kelompok</li>
                        </ul>
                    </div>
                    <div class="md:w-1/3">
                        <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                            <h3 class="text-lg font-semibold text-blue-800 mb-2">Petunjuk Penggunaan</h3>
                            <ol class="list-decimal pl-5 space-y-2 text-sm">
                                <li>Klik tab menu untuk berpindah antar materi</li>
                                <li>Pelajari materi secara berurutan</li>
                                <li>Kerjakan latihan soal pada setiap materi</li>
                                <li>Lakukan refleksi setelah mempelajari semua materi</li>
                                <li>Kerjakan evaluasi akhir untuk mengukur pemahaman</li>
                            </ol>
                        </div>
                        
                        <div class="mt-4 bg-green-50 rounded-lg p-4 border border-green-200">
                            <h3 class="text-lg font-semibold text-green-800 mb-2">Model Pembelajaran</h3>
                            <ul class="list-disc pl-5 space-y-2 text-sm">
                                <li>Discovery/Inquiry Learning</li>
                                <li>Cooperative Learning</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow">
                    <div class="flex items-center justify-center h-40 bg-blue-100 rounded-lg mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-blue-800 mb-2">Keragaman Alam Indonesia</h3>
                    <p class="text-sm text-gray-600">Mempelajari karakteristik geografis dan keragaman alam Indonesia yang mempengaruhi kehidupan masyarakat.</p>
                    <div class="mt-4 flex items-center justify-between">
                        <button class="tab px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex-1 mr-2" data-target="materi1">Pelajari</button>
                        <div class="progress-indicator w-6 h-6 rounded-full border-2 border-gray-300" id="progress-materi1">
                            <svg class="w-4 h-4 text-green-500 hidden" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow">
                    <div class="flex items-center justify-center h-40 bg-green-100 rounded-lg mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-green-800 mb-2">Sumber Daya Alam Indonesia</h3>
                    <p class="text-sm text-gray-600">Menganalisis pemanfaatan sumber daya alam Indonesia untuk kesejahteraan masyarakat.</p>
                    <div class="mt-4 flex items-center justify-between">
                        <button class="tab px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex-1 mr-2" data-target="materi2">Pelajari</button>
                        <div class="progress-indicator w-6 h-6 rounded-full border-2 border-gray-300" id="progress-materi2">
                            <svg class="w-4 h-4 text-green-500 hidden" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-md p-4 hover:shadow-lg transition-shadow">
                    <div class="flex items-center justify-center h-40 bg-purple-100 rounded-lg mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-purple-800 mb-2">Sumber Daya Manusia</h3>
                    <p class="text-sm text-gray-600">Merancang upaya meningkatkan kualitas sumber daya manusia di Indonesia.</p>
                    <div class="mt-4 flex items-center justify-between">
                        <button class="tab px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex-1 mr-2" data-target="materi3">Pelajari</button>
                        <div class="progress-indicator w-6 h-6 rounded-full border-2 border-gray-300" id="progress-materi3">
                            <svg class="w-4 h-4 text-green-500 hidden" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Materi 1: Karakteristik Geografis dan Keragaman Alam Indonesia -->
        <div class="page" id="materi1">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-blue-800 mb-4">Materi 1: Karakteristik Geografis dan Keragaman Alam Indonesia</h2>
                
                <div class="mb-6">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-blue-700">Tujuan Pembelajaran</h3>
                    </div>
                    <ul class="list-disc pl-12 space-y-2">
                        <li>Mengidentifikasi letak geografis Indonesia</li>
                        <li>Menganalisis pengaruh letak geografis terhadap kondisi alam Indonesia</li>
                        <li>Menjelaskan keragaman bentuk muka bumi Indonesia</li>
                        <li>Menganalisis pengaruh keragaman alam terhadap kehidupan masyarakat</li>
                    </ul>
                </div>

                <div class="accordion mb-6">
                    <div class="accordion-header bg-blue-50 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-blue-800">A. Letak Geografis Indonesia</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600 transform transition-transform accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content p-4 bg-white border border-blue-100 rounded-b-lg">
                        <p class="mb-4">Indonesia terletak di antara dua benua (Asia dan Australia) dan dua samudera (Hindia dan Pasifik). Secara astronomis, Indonesia terletak di antara 6¬∞ LU - 11¬∞ LS dan 95¬∞ BT - 141¬∞ BT.</p>
                        
                        <p class="mb-4">Letak geografis Indonesia memberikan beberapa keuntungan:</p>
                        <ol class="list-decimal pl-6 mb-4">
                            <li>Menjadi jalur perdagangan internasional</li>
                            <li>Memiliki iklim tropis dengan curah hujan tinggi</li>
                            <li>Kaya akan keanekaragaman hayati</li>
                            <li>Memiliki dua musim (kemarau dan hujan)</li>
                        </ol>
                        
                        <p>Namun, letak geografis ini juga memberikan tantangan seperti rawan bencana alam karena berada di jalur cincin api Pasifik (Ring of Fire).</p>
                    </div>
                </div>

                <div class="accordion mb-6">
                    <div class="accordion-header bg-blue-50 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-blue-800">B. Keragaman Bentuk Muka Bumi Indonesia</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600 transform transition-transform accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content p-4 bg-white border border-blue-100 rounded-b-lg">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
                            <div>
                                <h4 class="font-semibold text-blue-700 mb-2">1. Dataran Rendah</h4>
                                <p class="mb-2">Dataran rendah adalah wilayah dengan ketinggian 0-200 meter di atas permukaan laut.</p>
                                <p><strong>Contoh:</strong> Dataran rendah pantai utara Jawa, dataran rendah Sumatera Timur</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-blue-700 mb-2">2. Dataran Tinggi</h4>
                                <p class="mb-2">Dataran tinggi adalah wilayah dengan ketinggian di atas 200 meter dari permukaan laut yang relatif datar.</p>
                                <p><strong>Contoh:</strong> Dataran tinggi Dieng, Dataran tinggi Bandung</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Latihan Soal Materi 1 -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h3 class="text-xl font-bold text-blue-800 mb-4">Latihan Soal Komprehensif (20 Soal)</h3>
                
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200 mb-6">
                    <h4 class="font-semibold text-blue-800 mb-2">Petunjuk Mengerjakan:</h4>
                    <ul class="list-disc pl-6 text-sm">
                        <li>Bacalah setiap soal dengan teliti</li>
                        <li>Pilih jawaban yang paling tepat</li>
                        <li>Kerjakan semua soal sebelum memeriksa jawaban</li>
                        <li>Soal mencakup seluruh materi Karakteristik Geografis dan Keragaman Alam Indonesia</li>
                    </ul>
                </div>
                
                <div class="quiz" id="quiz-materi1">
                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">1. Indonesia terletak di antara dua benua, yaitu...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Asia dan Afrika</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Asia dan Australia</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Australia dan Amerika</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Eropa dan Asia</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">2. Letak astronomis Indonesia adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. 6¬∞ LU - 11¬∞ LS dan 95¬∞ BT - 141¬∞ BT</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. 6¬∞ LS - 11¬∞ LU dan 95¬∞ BB - 141¬∞ BB</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. 6¬∞ LU - 11¬∞ LS dan 95¬∞ BB - 141¬∞ BT</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. 6¬∞ LS - 11¬∞ LU dan 95¬∞ BT - 141¬∞ BT</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">3. Indonesia berada di jalur perdagangan internasional karena terletak di antara dua samudera, yaitu...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Samudera Atlantik dan Pasifik</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Samudera Hindia dan Pasifik</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Samudera Arktik dan Hindia</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Samudera Atlantik dan Hindia</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">4. Keuntungan letak geografis Indonesia adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Memiliki iklim kutub</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Menjadi jalur perdagangan internasional</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Tidak pernah terjadi gempa bumi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Memiliki satu musim sepanjang tahun</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">5. Indonesia memiliki iklim tropis karena...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. Terletak di sekitar garis khatulistiwa</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. Dikelilingi oleh gunung tinggi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Memiliki banyak pulau</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Terletak di daerah kutub</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">6. Dataran rendah adalah wilayah dengan ketinggian...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. 0-200 meter di atas permukaan laut</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. 200-500 meter di atas permukaan laut</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. 500-1000 meter di atas permukaan laut</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Di atas 1000 meter dari permukaan laut</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">7. Contoh dataran rendah di Indonesia adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Dataran tinggi Dieng</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Dataran rendah pantai utara Jawa</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Dataran tinggi Bandung</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Pegunungan Jayawijaya</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">8. Indonesia rawan bencana alam karena...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Memiliki banyak sungai</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Berada di jalur cincin api Pasifik (Ring of Fire)</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Memiliki iklim tropis</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Dikelilingi oleh laut</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">9. Musim di Indonesia dibagi menjadi...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Musim semi, panas, gugur, dingin</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Musim kemarau dan musim hujan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Musim panas dan musim dingin</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Musim semi dan musim gugur</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">10. Keragaman bentuk muka bumi Indonesia disebabkan oleh...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Pengaruh angin muson</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Aktivitas tektonik dan vulkanik</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Pengaruh arus laut</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Rotasi bumi</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">11. Dataran tinggi cocok untuk...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Budidaya ikan laut</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Perkebunan teh dan kopi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Pertambangan minyak bumi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Pelabuhan besar</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">12. Garis khatulistiwa yang melewati Indonesia menyebabkan...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. Indonesia memiliki curah hujan tinggi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. Indonesia memiliki iklim kutub</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Indonesia tidak pernah hujan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Indonesia memiliki salju</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">13. Pengaruh letak geografis Indonesia terhadap kehidupan masyarakat adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Masyarakat hanya bisa bertani</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Keanekaragaman mata pencaharian</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Semua daerah memiliki iklim sama</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Tidak ada perbedaan budaya</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">14. Wilayah Indonesia yang memiliki ketinggian di atas 200 meter dari permukaan laut disebut...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Dataran rendah</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Dataran tinggi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Lembah</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Pantai</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">15. Keanekaragaman hayati Indonesia tinggi karena...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. Memiliki iklim tropis dengan curah hujan tinggi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. Memiliki iklim kutub</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Tidak pernah hujan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Memiliki gurun pasir</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">16. Batas wilayah Indonesia sebelah utara adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Samudera Hindia</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Malaysia, Singapura, Filipina, dan Laut Cina Selatan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Australia dan Papua Nugini</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Timor Leste</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">17. Karakteristik iklim tropis di Indonesia adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Suhu rendah sepanjang tahun</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Suhu tinggi dan kelembaban tinggi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Tidak pernah turun hujan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Memiliki empat musim</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">18. Dampak positif letak Indonesia di jalur perdagangan internasional adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. Meningkatkan perekonomian melalui perdagangan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. Mengurangi keanekaragaman budaya</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Menyebabkan bencana alam</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Mengurangi hasil pertanian</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">19. Pegunungan di Indonesia terbentuk karena...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Erosi air laut</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Aktivitas tektonik dan vulkanik</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Sedimentasi sungai</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Pengaruh angin</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">20. Manfaat keragaman bentuk muka bumi Indonesia bagi kehidupan adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Menyebabkan bencana alam</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Menciptakan keanekaragaman mata pencaharian</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Mengurangi hasil pertanian</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Menyulitkan transportasi</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="check-answers bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">Periksa Jawaban</button>
                    
                    <div class="mt-4 result hidden"></div>
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="markMaterialComplete('materi1')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">
                        ‚úì Selesaikan Materi 1
                    </button>
                </div>
            </div>
        </div>

        <!-- Materi 2: Pemanfaatan Sumber Daya Alam Indonesia -->
        <div class="page" id="materi2">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-green-800 mb-4">Materi 2: Pemanfaatan Sumber Daya Alam Indonesia</h2>
                
                <div class="mb-6">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-green-700">Tujuan Pembelajaran</h3>
                    </div>
                    <ul class="list-disc pl-12 space-y-2">
                        <li>Mengidentifikasi jenis-jenis sumber daya alam di Indonesia</li>
                        <li>Menganalisis persebaran sumber daya alam di Indonesia</li>
                        <li>Menjelaskan pemanfaatan sumber daya alam untuk kesejahteraan masyarakat</li>
                        <li>Menganalisis dampak pemanfaatan sumber daya alam terhadap lingkungan</li>
                    </ul>
                </div>

                <div class="accordion mb-6">
                    <div class="accordion-header bg-green-50 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-green-800">A. Jenis-jenis Sumber Daya Alam</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600 transform transition-transform accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content p-4 bg-white border border-green-100 rounded-b-lg">
                        <p class="mb-4">Sumber daya alam adalah segala sesuatu yang berasal dari alam dan dapat dimanfaatkan untuk memenuhi kebutuhan hidup manusia.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-green-800 mb-2">Sumber Daya Alam Terbarukan</h5>
                                <p class="mb-2">Sumber daya alam yang dapat diperbaharui atau tidak akan habis jika digunakan.</p>
                                <p><strong>Contoh:</strong> Air, angin, sinar matahari, hewan, tumbuhan</p>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-red-800 mb-2">Sumber Daya Alam Tidak Terbarukan</h5>
                                <p class="mb-2">Sumber daya alam yang jumlahnya terbatas dan akan habis jika digunakan terus-menerus.</p>
                                <p><strong>Contoh:</strong> Minyak bumi, batu bara, gas alam, barang tambang</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Latihan Soal Materi 2 -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-bold text-green-800 mb-4">Latihan Soal Komprehensif (20 Soal)</h3>
                    
                    <div class="bg-green-50 p-4 rounded-lg border border-green-200 mb-6">
                        <h4 class="font-semibold text-green-800 mb-2">Petunjuk Mengerjakan:</h4>
                        <ul class="list-disc pl-6 text-sm">
                            <li>Bacalah setiap soal dengan teliti</li>
                            <li>Pilih jawaban yang paling tepat</li>
                            <li>Kerjakan semua soal sebelum memeriksa jawaban</li>
                            <li>Soal mencakup seluruh materi Pemanfaatan Sumber Daya Alam Indonesia</li>
                        </ul>
                    </div>
                    
                    <div class="quiz" id="quiz-materi2">
                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">1. Sumber daya alam yang dapat diperbaharui adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Air, angin, dan sinar matahari</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Minyak bumi, batu bara, dan gas alam</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Emas, perak, dan tembaga</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Besi, nikel, dan timah</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">2. Contoh sumber daya alam tidak terbarukan adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Hutan dan perikanan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Minyak bumi dan batu bara</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Air dan udara</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tanah dan tumbuhan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">3. Daerah penghasil minyak bumi terbesar di Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Jawa Barat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Riau dan Kalimantan Timur</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Sulawesi Selatan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Nusa Tenggara Barat</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">4. Manfaat hutan bagi kehidupan manusia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Hanya sebagai sumber kayu</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Mengatur tata air dan mencegah banjir</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengurangi curah hujan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Menyebabkan pemanasan global</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">5. Indonesia kaya akan sumber daya laut karena...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Memiliki garis pantai yang panjang</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Terletak di daerah kutub</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Memiliki iklim kering</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak memiliki sungai</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">6. Batu bara banyak ditemukan di daerah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Bali dan Lombok</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Kalimantan dan Sumatera</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Maluku dan Papua</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Jawa Tengah dan Yogyakarta</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">7. Dampak negatif penambangan yang berlebihan adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Meningkatkan kesuburan tanah</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Kerusakan lingkungan dan pencemaran</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Menambah curah hujan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Memperbaiki kualitas udara</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">8. Gas alam banyak dimanfaatkan untuk...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Bahan baku tekstil</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Bahan bakar dan pupuk</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Bahan bangunan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Obat-obatan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">9. Upaya pelestarian sumber daya alam dapat dilakukan dengan...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Eksploitasi besar-besaran</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Pemanfaatan secara bijaksana dan berkelanjutan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengabaikan dampak lingkungan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Menebang hutan secara liar</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">10. Hasil tambang yang banyak diekspor Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Nikel, timah, dan bauksit</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Gandum dan jagung</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Susu dan keju</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Daging dan telur</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">11. Sumber daya alam hayati meliputi...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Tumbuhan dan hewan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Batu bara dan minyak bumi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Emas dan perak</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Besi dan tembaga</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">12. Pemanfaatan sumber daya air dapat dilakukan untuk...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Hanya untuk minum</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Irigasi, PLTA, dan transportasi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Hanya untuk industri</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Hanya untuk rekreasi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">13. Daerah penghasil emas terbesar di Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Jawa Barat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Papua dan Nusa Tenggara Barat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Bali dan Lombok</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Sulawesi Utara</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">14. Kegiatan reboisasi bertujuan untuk...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Menebang pohon</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Menanam kembali hutan yang gundul</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Membuka lahan pertanian</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Membangun pabrik</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">15. Sumber daya alam non hayati meliputi...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Hewan dan tumbuhan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Tanah, air, dan barang tambang</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Ikan dan udang</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Kayu dan rotan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">16. Dampak positif pemanfaatan sumber daya alam adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Meningkatkan kesejahteraan masyarakat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Merusak lingkungan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengurangi keanekaragaman hayati</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Menyebabkan pencemaran</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">17. Energi alternatif yang dapat dikembangkan di Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Energi surya dan panas bumi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Batu bara dan minyak bumi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Gas alam dan LPG</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Bensin dan solar</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">18. Perikanan laut Indonesia menghasilkan...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Tuna, cakalang, dan udang</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Emas dan perak</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Batu bara dan minyak</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Kayu dan rotan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">19. Prinsip pembangunan berkelanjutan adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Mengeksploitasi semua sumber daya</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Memenuhi kebutuhan saat ini tanpa mengorbankan generasi mendatang</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengabaikan dampak lingkungan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Hanya memikirkan keuntungan ekonomi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">20. Cara menjaga kelestarian sumber daya alam adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Menebang hutan secara liar</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Menerapkan sistem tebang pilih dan reboisasi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Membuang limbah sembarangan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Menangkap ikan dengan bom</span>
                                </div>
                            </div>
                        </div>
                        
                        <button class="check-answers bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">Periksa Jawaban</button>
                        
                        <div class="mt-4 result hidden"></div>
                    </div>
                </div>

                <div class="text-center mt-6">
                    <button onclick="markMaterialComplete('materi2')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">
                        ‚úì Selesaikan Materi 2
                    </button>
                </div>
            </div>
        </div>

        <!-- Materi 3: Sumber Daya Manusia -->
        <div class="page" id="materi3">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-purple-800 mb-4">Materi 3: Sumber Daya Manusia Indonesia</h2>
                
                <div class="mb-6">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-purple-600 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-purple-700">Tujuan Pembelajaran</h3>
                    </div>
                    <ul class="list-disc pl-12 space-y-2">
                        <li>Menganalisis kondisi sumber daya manusia Indonesia</li>
                        <li>Mengidentifikasi faktor-faktor yang mempengaruhi kualitas SDM</li>
                        <li>Merancang upaya meningkatkan kualitas sumber daya manusia</li>
                        <li>Menjelaskan peran pendidikan dalam pembangunan SDM</li>
                    </ul>
                </div>

                <div class="accordion mb-6">
                    <div class="accordion-header bg-purple-50 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-purple-800">A. Kondisi Sumber Daya Manusia Indonesia</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600 transform transition-transform accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content p-4 bg-white border border-purple-100 rounded-b-lg">
                        <p class="mb-4">Indonesia memiliki jumlah penduduk yang besar, sekitar 270 juta jiwa, yang merupakan aset sekaligus tantangan dalam pembangunan nasional.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-green-800 mb-2">Potensi SDM Indonesia</h5>
                                <ul class="list-disc pl-6">
                                    <li>Jumlah penduduk besar (bonus demografi)</li>
                                    <li>Usia produktif yang tinggi</li>
                                    <li>Keragaman budaya dan bahasa</li>
                                    <li>Kreativitas dan inovasi</li>
                                </ul>
                            </div>
                            <div class="bg-red-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-red-800 mb-2">Tantangan SDM Indonesia</h5>
                                <ul class="list-disc pl-6">
                                    <li>Kualitas pendidikan yang belum merata</li>
                                    <li>Kesenjangan keterampilan</li>
                                    <li>Pengangguran dan underemployment</li>
                                    <li>Migrasi tenaga kerja</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Latihan Soal Materi 3 -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-bold text-purple-800 mb-4">Latihan Soal Komprehensif (20 Soal)</h3>
                    
                    <div class="bg-purple-50 p-4 rounded-lg border border-purple-200 mb-6">
                        <h4 class="font-semibold text-purple-800 mb-2">Petunjuk Mengerjakan:</h4>
                        <ul class="list-disc pl-6 text-sm">
                            <li>Bacalah setiap soal dengan teliti</li>
                            <li>Pilih jawaban yang paling tepat</li>
                            <li>Kerjakan semua soal sebelum memeriksa jawaban</li>
                            <li>Soal mencakup seluruh materi Sumber Daya Manusia Indonesia</li>
                        </ul>
                    </div>
                    
                    <div class="quiz" id="quiz-materi3">
                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">1. Jumlah penduduk Indonesia saat ini sekitar...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. 200 juta jiwa</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. 270 juta jiwa</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. 300 juta jiwa</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. 350 juta jiwa</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">2. Bonus demografi adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Kondisi dimana jumlah penduduk usia produktif lebih banyak</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Kondisi dimana jumlah penduduk lansia lebih banyak</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Kondisi dimana jumlah penduduk anak-anak lebih banyak</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Kondisi dimana jumlah penduduk menurun drastis</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">3. Usia produktif penduduk Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. 10-50 tahun</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. 15-64 tahun</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. 20-70 tahun</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. 25-75 tahun</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">4. Faktor yang mempengaruhi kualitas SDM adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pendidikan, kesehatan, dan keterampilan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Hanya pendidikan saja</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Hanya kesehatan saja</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Hanya keterampilan saja</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">5. Upaya meningkatkan kualitas SDM dapat dilakukan melalui...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Peningkatan kualitas pendidikan dan pelatihan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Pengurangan jumlah penduduk</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Pembatasan akses teknologi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Pengurangan investasi pendidikan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">6. Tantangan SDM Indonesia saat ini adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Jumlah penduduk yang terlalu sedikit</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Kualitas pendidikan yang belum merata</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Tidak ada keragaman budaya</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Semua penduduk sudah berpendidikan tinggi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">7. Indeks Pembangunan Manusia (IPM) mengukur...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pendidikan, kesehatan, dan ekonomi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Hanya tingkat pendidikan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Hanya tingkat kesehatan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Hanya tingkat ekonomi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">8. Keragaman budaya Indonesia merupakan...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Kekayaan dan potensi bangsa</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Hambatan pembangunan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Penyebab konflik</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Penghambat kemajuan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">9. Pengangguran terjadi karena...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>A. Jumlah penduduk terlalu sedikit</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>B. Ketidaksesuaian antara keahlian dan kebutuhan kerja</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Terlalu banyak lapangan kerja</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Semua orang malas bekerja</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">10. Migrasi tenaga kerja Indonesia ke luar negeri disebabkan...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Mencari peluang kerja dan upah yang lebih baik</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Tidak suka tinggal di Indonesia</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Dipaksa oleh pemerintah</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak ada alasan khusus</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">11. Peran pendidikan dalam pembangunan SDM adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Meningkatkan pengetahuan dan keterampilan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengurangi kreativitas</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Membuat orang malas</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak ada pengaruh</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">12. Keterampilan yang dibutuhkan di era digital adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Literasi digital dan teknologi informasi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Hanya kemampuan membaca</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Hanya kemampuan menulis</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak perlu keterampilan khusus</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">13. Program wajib belajar 12 tahun bertujuan untuk...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Meningkatkan kualitas pendidikan masyarakat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengurangi jumlah sekolah</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Membuat anak malas belajar</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengurangi biaya pendidikan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">14. Kesenjangan keterampilan (skill gap) dapat diatasi dengan...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pelatihan vokasi dan sertifikasi profesi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengurangi jumlah pekerja</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Menutup semua sekolah</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak melakukan apa-apa</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">15. Inovasi dan kreativitas SDM Indonesia dapat dikembangkan melalui...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pendidikan yang mendorong berpikir kritis</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Pendidikan yang hanya menghafal</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Melarang penggunaan teknologi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Membatasi akses informasi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">16. Peran generasi muda dalam pembangunan SDM adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Sebagai agen perubahan dan inovasi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Hanya sebagai penonton</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Tidak memiliki peran</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Hanya menunggu perintah</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">17. Investasi dalam bidang kesehatan penting untuk SDM karena...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Meningkatkan produktivitas dan kualitas hidup</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengurangi jumlah penduduk</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Membuat orang malas bekerja</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak ada manfaatnya</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">18. Underemployment adalah kondisi dimana...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Seseorang bekerja tidak sesuai dengan keahliannya</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Seseorang tidak bekerja sama sekali</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Seseorang bekerja terlalu keras</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Seseorang bekerja sesuai keahlian</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">19. Cara mengoptimalkan bonus demografi adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Meningkatkan kualitas pendidikan dan keterampilan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengurangi jumlah penduduk usia produktif</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengabaikan pendidikan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak melakukan persiapan apapun</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">20. Kualitas SDM yang baik akan menghasilkan...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pembangunan ekonomi yang berkelanjutan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Kemunduran ekonomi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Konflik sosial</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak ada dampak</span>
                                </div>
                            </div>
                        </div>
                        
                        <button class="check-answers bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">Periksa Jawaban</button>
                        
                        <div class="mt-4 result hidden"></div>
                    </div>
                </div>

                <div class="text-center mt-6">
                    <button onclick="markMaterialComplete('materi3')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">
                        ‚úì Selesaikan Materi 3
                    </button>
                </div>
            </div>
        </div>

        <!-- Materi 4: Peran Lembaga Sosial -->
        <div class="page" id="materi4">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-orange-800 mb-4">Materi 4: Peran Lembaga Sosial dalam Pemanfaatan Sumber Daya</h2>
                
                <div class="mb-6">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-orange-600 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-orange-700">Tujuan Pembelajaran</h3>
                    </div>
                    <ul class="list-disc pl-12 space-y-2">
                        <li>Mengidentifikasi jenis-jenis lembaga sosial</li>
                        <li>Menganalisis peran lembaga sosial dalam pemanfaatan SDA dan SDM</li>
                        <li>Menjelaskan fungsi lembaga sosial dalam masyarakat</li>
                        <li>Menganalisis hubungan antar lembaga sosial</li>
                    </ul>
                </div>

                <div class="accordion mb-6">
                    <div class="accordion-header bg-orange-50 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-orange-800">A. Pengertian dan Jenis Lembaga Sosial</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-600 transform transition-transform accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content p-4 bg-white border border-orange-100 rounded-b-lg">
                        <p class="mb-4">Lembaga sosial adalah sistem norma dan aturan yang mengatur perilaku masyarakat dalam memenuhi kebutuhan hidup.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-blue-800 mb-2">Lembaga Ekonomi</h5>
                                <p class="mb-2">Mengatur kegiatan produksi, distribusi, dan konsumsi.</p>
                                <p><strong>Contoh:</strong> Bank, koperasi, pasar, perusahaan</p>
                            </div>
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-green-800 mb-2">Lembaga Pendidikan</h5>
                                <p class="mb-2">Mengatur proses pendidikan dan pengembangan SDM.</p>
                                <p><strong>Contoh:</strong> Sekolah, universitas, pesantren</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Latihan Soal Materi 4 -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-bold text-orange-800 mb-4">Latihan Soal Komprehensif (20 Soal)</h3>
                    
                    <div class="bg-orange-50 p-4 rounded-lg border border-orange-200 mb-6">
                        <h4 class="font-semibold text-orange-800 mb-2">Petunjuk Mengerjakan:</h4>
                        <ul class="list-disc pl-6 text-sm">
                            <li>Bacalah setiap soal dengan teliti</li>
                            <li>Pilih jawaban yang paling tepat</li>
                            <li>Kerjakan semua soal sebelum memeriksa jawaban</li>
                            <li>Soal mencakup seluruh materi Peran Lembaga Sosial dalam Pemanfaatan Sumber Daya</li>
                        </ul>
                    </div>
                    
                    <div class="quiz" id="quiz-materi4">
                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">1. Lembaga sosial adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Sistem norma dan aturan yang mengatur perilaku masyarakat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Bangunan fisik tempat berkumpul</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Organisasi politik</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Kelompok orang kaya</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">2. Lembaga ekonomi berperan dalam...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Mengatur kegiatan produksi, distribusi, dan konsumsi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengatur kegiatan ibadah</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengatur kegiatan olahraga</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengatur kegiatan seni</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">3. Contoh lembaga ekonomi adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Bank, koperasi, dan pasar</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Sekolah, universitas, dan pesantren</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Masjid, gereja, dan pura</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. DPR, MPR, dan MA</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">4. Lembaga pendidikan berfungsi untuk...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Mengatur proses pendidikan dan pengembangan SDM</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengatur kegiatan perdagangan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengatur kegiatan politik</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengatur kegiatan keagamaan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">5. Koperasi sebagai lembaga ekonomi memiliki prinsip...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Gotong royong dan kebersamaan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Persaingan bebas</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Monopoli pasar</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Individualisme</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">6. Lembaga politik berperan dalam...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Mengatur kekuasaan dan pemerintahan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengatur kegiatan ekonomi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengatur kegiatan pendidikan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengatur kegiatan keagamaan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">7. Contoh lembaga politik di Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. DPR, DPD, dan MPR</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Bank Indonesia dan BNI</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. UI, ITB, dan UGM</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. MUI, PGI, dan PHDI</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">8. Lembaga keluarga memiliki fungsi...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Sosialisasi, reproduksi, dan ekonomi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Hanya reproduksi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Hanya ekonomi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Hanya sosialisasi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">9. Lembaga agama berperan dalam...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Mengatur kehidupan spiritual dan moral masyarakat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengatur kegiatan ekonomi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengatur kegiatan politik</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengatur kegiatan olahraga</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">10. Hubungan antar lembaga sosial bersifat...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Saling berkaitan dan mempengaruhi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Terpisah dan tidak berhubungan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Saling bertentangan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak ada hubungan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">11. Peran lembaga ekonomi dalam pemanfaatan SDA adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Mengatur eksploitasi dan distribusi SDA</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Melarang pemanfaatan SDA</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Hanya mengawasi tanpa terlibat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak memiliki peran</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">12. Lembaga pendidikan berperan dalam pengembangan SDM melalui...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Transfer pengetahuan dan keterampilan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Pemberian modal usaha</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Pemberian lahan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Pemberian teknologi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">13. Fungsi lembaga hukum dalam masyarakat adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Menegakkan keadilan dan ketertiban</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengatur kegiatan ekonomi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengatur kegiatan pendidikan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengatur kegiatan keagamaan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">14. Lembaga sosial terbentuk karena...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Kebutuhan masyarakat untuk mengatur kehidupan bersama</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Keinginan penguasa</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Pengaruh budaya asing</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Kebetulan saja</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">15. Peran lembaga kesehatan dalam pembangunan SDM adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Menjaga dan meningkatkan kesehatan masyarakat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Memberikan pendidikan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Memberikan modal usaha</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Memberikan lapangan kerja</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">16. Contoh konflik antar lembaga sosial dapat terjadi antara...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Lembaga ekonomi dan lembaga lingkungan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Lembaga pendidikan dan lembaga keluarga</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Lembaga agama dan lembaga keluarga</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak pernah terjadi konflik</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">17. Lembaga adat berperan dalam...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Melestarikan budaya dan tradisi lokal</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengatur kegiatan ekonomi modern</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengatur teknologi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengatur perdagangan internasional</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">18. Koordinasi antar lembaga sosial diperlukan untuk...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Mencapai tujuan pembangunan yang optimal</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Menciptakan persaingan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengurangi efisiensi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Menciptakan konflik</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">19. Lembaga media massa berperan dalam...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Menyebarkan informasi dan membentuk opini publik</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mengatur kegiatan ekonomi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Mengatur kegiatan politik</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengatur kegiatan pendidikan</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">20. Efektivitas lembaga sosial dapat diukur dari...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Kemampuan mencapai tujuan dan memenuhi kebutuhan masyarakat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Jumlah anggota yang banyak</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Gedung yang megah</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Usia yang tua</span>
                                </div>
                            </div>
                        </div>
                        
                        <button class="check-answers bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors">Periksa Jawaban</button>
                        
                        <div class="mt-4 result hidden"></div>
                    </div>
                </div>

                <div class="text-center mt-6">
                    <button onclick="markMaterialComplete('materi4')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">
                        ‚úì Selesaikan Materi 4
                    </button>
                </div>
            </div>
        </div>

        <!-- Materi 5: Kondisi Geografis dan Interaksi dengan Bangsa Asing -->
        <div class="page" id="materi5">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-red-800 mb-4">Materi 5: Kondisi Geografis dan Interaksi dengan Bangsa Asing</h2>
                
                <div class="mb-6">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-600 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-red-700">Tujuan Pembelajaran</h3>
                    </div>
                    <ul class="list-disc pl-12 space-y-2">
                        <li>Menghubungkan kondisi geografis dengan kegiatan ekonomi masa lalu</li>
                        <li>Menganalisis asal mula kedatangan Hindu-Buddha di Indonesia</li>
                        <li>Menjelaskan pengaruh letak geografis terhadap interaksi budaya</li>
                        <li>Menganalisis dampak interaksi dengan bangsa asing</li>
                    </ul>
                </div>

                <div class="accordion mb-6">
                    <div class="accordion-header bg-red-50 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-red-800">A. Pengaruh Letak Geografis terhadap Kegiatan Ekonomi Masa Lalu</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600 transform transition-transform accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content p-4 bg-white border border-red-100 rounded-b-lg">
                        <p class="mb-4">Letak geografis Indonesia yang strategis di jalur perdagangan internasional telah menjadikan Indonesia sebagai pusat perdagangan sejak zaman kuno.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-yellow-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-yellow-800 mb-2">Jalur Perdagangan Kuno</h5>
                                <ul class="list-disc pl-6">
                                    <li>Jalur Sutra maritim</li>
                                    <li>Perdagangan rempah-rempah</li>
                                    <li>Pelabuhan-pelabuhan penting</li>
                                    <li>Kerajaan maritim Nusantara</li>
                                </ul>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-blue-800 mb-2">Komoditas Perdagangan</h5>
                                <ul class="list-disc pl-6">
                                    <li>Rempah-rempah (pala, cengkeh, lada)</li>
                                    <li>Hasil hutan (kayu, rotan, damar)</li>
                                    <li>Logam mulia (emas, perak)</li>
                                    <li>Tekstil dan kerajinan</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="accordion mb-6">
                    <div class="accordion-header bg-red-50 p-4 rounded-lg cursor-pointer flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-red-800">B. Asal Mula Kedatangan Hindu-Buddha di Indonesia</h3>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600 transform transition-transform accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div class="accordion-content p-4 bg-white border border-red-100 rounded-b-lg">
                        <p class="mb-4">Kedatangan agama dan budaya Hindu-Buddha ke Indonesia terjadi melalui jalur perdagangan dan interaksi budaya dengan India dan Tiongkok.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-green-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-green-800 mb-2">Teori Waisya</h5>
                                <p class="text-sm">Penyebaran melalui pedagang India yang datang ke Indonesia untuk berdagang.</p>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-blue-800 mb-2">Teori Ksatria</h5>
                                <p class="text-sm">Penyebaran melalui prajurit dan bangsawan India yang mendirikan kerajaan.</p>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-lg">
                                <h5 class="font-semibold text-purple-800 mb-2">Teori Brahmana</h5>
                                <p class="text-sm">Penyebaran melalui pendeta Hindu-Buddha yang diundang raja-raja Indonesia.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Latihan Soal Materi 5 -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h3 class="text-xl font-bold text-red-800 mb-4">Latihan Soal Komprehensif (20 Soal)</h3>
                    
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200 mb-6">
                        <h4 class="font-semibold text-red-800 mb-2">Petunjuk Mengerjakan:</h4>
                        <ul class="list-disc pl-6 text-sm">
                            <li>Bacalah setiap soal dengan teliti</li>
                            <li>Pilih jawaban yang paling tepat</li>
                            <li>Kerjakan semua soal sebelum memeriksa jawaban</li>
                            <li>Soal mencakup seluruh materi Kondisi Geografis dan Interaksi dengan Bangsa Asing</li>
                        </ul>
                    </div>
                    
                    <div class="quiz" id="quiz-materi5">
                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">1. Jalur perdagangan kuno yang melewati Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Jalur Sutra maritim</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Jalur Trans-Siberia</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Jalur Trans-Amerika</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Jalur Trans-Afrika</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">2. Rempah-rempah yang menjadi komoditas utama perdagangan Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pala, cengkeh, dan lada</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Gandum, jagung, dan beras</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Kapas, sutra, dan wol</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Teh, kopi, dan gula</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">3. Kerajaan maritim Nusantara yang terkenal adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Sriwijaya dan Majapahit</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Mataram dan Pajajaran</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Singasari dan Kediri</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tarumanagara dan Kutai</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">4. Teori Waisya menjelaskan bahwa Hindu-Buddha masuk ke Indonesia melalui...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pedagang India yang datang berdagang</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Prajurit India yang menaklukkan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Pendeta yang diundang raja</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Pelaut yang terdampar</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">5. Teori Ksatria menyatakan bahwa Hindu-Buddha masuk melalui...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Prajurit dan bangsawan India</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Pedagang India</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Pendeta Hindu-Buddha</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Petani India</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">6. Teori Brahmana menjelaskan masuknya Hindu-Buddha melalui...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pendeta yang diundang raja-raja Indonesia</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Pedagang yang menyebarkan agama</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Prajurit yang mendirikan kerajaan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Pelaut yang terdampar</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">7. Pelabuhan penting dalam perdagangan kuno di Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Palembang dan Surabaya</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Medan dan Padang</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Denpasar dan Mataram</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Manado dan Ambon</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">8. Hasil hutan yang diperdagangkan pada masa lalu adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Kayu, rotan, dan damar</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Beras, jagung, dan kedelai</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Emas, perak, dan tembaga</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Kain, sutra, dan batik</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">9. Dampak positif interaksi dengan bangsa asing adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pertukaran budaya dan teknologi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Hilangnya budaya lokal</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Konflik antar suku</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Kemiskinan masyarakat</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">10. Kerajaan Sriwijaya berkembang karena...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Menguasai jalur perdagangan Selat Malaka</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Memiliki tentara yang kuat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Memiliki teknologi canggih</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Memiliki wilayah yang luas</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">11. Logam mulia yang diperdagangkan dari Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Emas dan perak</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Besi dan tembaga</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Timah dan nikel</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Aluminium dan seng</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">12. Pengaruh Hindu-Buddha terhadap kebudayaan Indonesia terlihat pada...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Arsitektur candi dan sistem pemerintahan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Teknologi pertanian modern</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Sistem transportasi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Teknologi komunikasi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">13. Tekstil dan kerajinan Indonesia yang diperdagangkan adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Batik, tenun, dan ukiran</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Plastik dan karet</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Elektronik dan komputer</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mobil dan motor</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">14. Faktor yang mendorong bangsa asing datang ke Indonesia adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Kekayaan rempah-rempah dan hasil alam</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Cuaca yang sejuk</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Teknologi yang canggih</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Sistem pemerintahan yang baik</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">15. Proses akulturasi budaya terjadi melalui...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Percampuran budaya lokal dengan budaya asing</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Penghapusan budaya lokal</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Penolakan budaya asing</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Isolasi budaya</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">16. Kerajaan Majapahit terkenal karena...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Menguasai wilayah Nusantara yang luas</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Memiliki teknologi modern</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Memiliki sistem demokrasi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Memiliki industri besar</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">17. Jalur perdagangan maritim penting karena...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Menghubungkan Asia dan Eropa</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Lebih cepat dari jalur darat</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Lebih aman dari bajak laut</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Tidak ada hambatan cuaca</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">18. Sistem mata pencaharian masyarakat Indonesia masa lalu dipengaruhi oleh...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Kondisi geografis dan iklim tropis</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Teknologi modern</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Sistem pendidikan</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Sistem politik</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">19. Bukti interaksi Indonesia dengan Tiongkok adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Keramik dan porselen Tiongkok di Indonesia</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Teknologi komputer</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Sistem transportasi</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Sistem komunikasi</span>
                                </div>
                            </div>
                        </div>

                        <div class="quiz-question mb-6">
                            <p class="font-semibold mb-2">20. Pelajaran yang dapat diambil dari sejarah interaksi Indonesia dengan bangsa asing adalah...</p>
                            <div class="quiz-options space-y-2">
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                    <span>A. Pentingnya menjaga identitas sambil terbuka terhadap budaya lain</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>B. Menutup diri dari pengaruh luar</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>C. Menolak semua budaya asing</span>
                                </div>
                                <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                    <span>D. Mengikuti semua budaya asing</span>
                                </div>
                            </div>
                        </div>
                        
                        <button class="check-answers bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">Periksa Jawaban</button>
                        
                        <div class="mt-4 result hidden"></div>
                    </div>
                </div>

                <div class="text-center mt-6">
                    <button onclick="markMaterialComplete('materi5')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">
                        ‚úì Selesaikan Materi 5
                    </button>
                </div>
            </div>
        </div>

        <!-- Evaluasi -->
        <div class="page" id="evaluasi">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-indigo-800 mb-4">Evaluasi Pembelajaran</h2>
                
                <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200 mb-6">
                    <h3 class="text-lg font-semibold text-indigo-800 mb-2">Petunjuk Evaluasi</h3>
                    <ul class="list-disc pl-6">
                        <li>Jawablah semua pertanyaan dengan teliti</li>
                        <li>Pilih jawaban yang paling tepat</li>
                        <li>Klik "Periksa Jawaban" setelah selesai mengerjakan</li>
                        <li>Evaluasi ini mencakup semua materi yang telah dipelajari</li>
                    </ul>
                </div>

                <div class="quiz" id="quiz-evaluasi">
                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">1. Letak astronomis Indonesia adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. 6¬∞ LU - 11¬∞ LS dan 95¬∞ BT - 141¬∞ BT</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. 6¬∞ LS - 11¬∞ LU dan 95¬∞ BB - 141¬∞ BB</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. 6¬∞ LU - 11¬∞ LS dan 95¬∞ BB - 141¬∞ BT</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. 6¬∞ LS - 11¬∞ LU dan 95¬∞ BT - 141¬∞ BT</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">2. Sumber daya alam yang termasuk kategori tidak terbarukan adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Air dan angin</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Minyak bumi dan batu bara</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Hutan dan perikanan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Sinar matahari dan panas bumi</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">3. Upaya meningkatkan kualitas SDM Indonesia dapat dilakukan melalui...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. Peningkatan kualitas pendidikan dan pelatihan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. Pengurangan jumlah penduduk</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Pembatasan akses teknologi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Pengurangan investasi pendidikan</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">4. Lembaga sosial yang berperan dalam mengatur kegiatan ekonomi adalah...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>A. Lembaga pendidikan</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>B. Lembaga ekonomi</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Lembaga agama</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Lembaga politik</span>
                            </div>
                        </div>
                    </div>

                    <div class="quiz-question mb-6">
                        <p class="font-semibold mb-2">5. Kedatangan Hindu-Buddha ke Indonesia menurut teori Waisya adalah melalui...</p>
                        <div class="quiz-options space-y-2">
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="true">
                                <span>A. Pedagang India</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>B. Prajurit India</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>C. Pendeta Hindu-Buddha</span>
                            </div>
                            <div class="quiz-option p-3 rounded-lg border border-gray-300" data-correct="false">
                                <span>D. Raja-raja India</span>
                            </div>
                        </div>
                    </div>

                    <button class="check-answers bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">Periksa Jawaban</button>
                    
                    <div class="mt-4 result hidden"></div>
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="markMaterialComplete('evaluasi')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">
                        ‚úì Selesaikan Evaluasi
                    </button>
                </div>
            </div>
        </div>

        <!-- Refleksi -->
        <div class="page" id="refleksi">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-teal-800 mb-4">Refleksi Pembelajaran</h2>
                
                <div class="bg-teal-50 p-4 rounded-lg border border-teal-200 mb-6">
                    <p class="mb-4">Setelah mempelajari semua materi IPS tentang karakteristik geografis Indonesia, sumber daya alam dan manusia, serta interaksi dengan bangsa asing, mari kita lakukan refleksi untuk mendalami pemahaman dan makna pembelajaran ini.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white border border-teal-200 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-teal-800 mb-3">Refleksi Individu</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">1. Apa yang paling menarik dari materi yang telah dipelajari?</label>
                                <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Tuliskan refleksi Anda..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">2. Bagaimana letak geografis Indonesia mempengaruhi kehidupan sehari-hari Anda?</label>
                                <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Tuliskan refleksi Anda..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">3. Mengapa kita perlu menjaga keragaman alam Indonesia?</label>
                                <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Tuliskan refleksi Anda..."></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white border border-teal-200 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-teal-800 mb-3">Refleksi Kelompok</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">4. Bagaimana Anda dapat berkontribusi dalam melestarikan SDA Indonesia?</label>
                                <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Diskusikan dengan kelompok..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">5. Apa peran generasi muda dalam mengembangkan SDM Indonesia?</label>
                                <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Diskusikan dengan kelompok..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">6. Bagaimana kita dapat belajar dari sejarah interaksi Indonesia dengan bangsa asing?</label>
                                <textarea class="w-full p-3 border border-gray-300 rounded-lg" rows="3" placeholder="Diskusikan dengan kelompok..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-6 bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                    <h3 class="text-lg font-semibold text-yellow-800 mb-3">Rencana Tindak Lanjut</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Berdasarkan pembelajaran ini, apa yang akan Anda lakukan untuk:</label>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-2">
                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">Menjaga Lingkungan</h4>
                                    <textarea class="w-full p-2 border border-gray-300 rounded" rows="3" placeholder="Rencana aksi..."></textarea>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">Mengembangkan Diri</h4>
                                    <textarea class="w-full p-2 border border-gray-300 rounded" rows="3" placeholder="Rencana aksi..."></textarea>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-800 mb-2">Berkontribusi untuk Bangsa</h4>
                                    <textarea class="w-full p-2 border border-gray-300 rounded" rows="3" placeholder="Rencana aksi..."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-6 text-center space-x-4">
                    <button class="bg-teal-600 text-white px-6 py-3 rounded-lg hover:bg-teal-700 transition-colors" onclick="saveReflection()">
                        Simpan Refleksi
                    </button>
                    <button onclick="markMaterialComplete('refleksi')" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">
                        ‚úì Selesaikan Refleksi
                    </button>
                </div>
            </div>
        </div>

        <!-- Laporan Progress -->
        <div class="page" id="laporan">
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h2 class="text-2xl font-bold text-indigo-800 mb-4">üìä Laporan Progress Pembelajaran Komprehensif</h2>
                
                <!-- Student Info Display -->
                <div class="bg-gradient-to-r from-indigo-600 to-indigo-700 rounded-xl p-6 mb-6 text-white" id="studentInfoDisplay">
                    <h3 class="text-xl font-bold mb-2">Informasi Siswa</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <span class="text-sm opacity-80">Nama:</span>
                            <p class="font-semibold" id="displayName">Belum diisi</p>
                        </div>
                        <div>
                            <span class="text-sm opacity-80">Kelas:</span>
                            <p class="font-semibold" id="displayClass">Belum diisi</p>
                        </div>
                        <div>
                            <span class="text-sm opacity-80">NIS:</span>
                            <p class="font-semibold" id="displayNIS">Belum diisi</p>
                        </div>
                        <div>
                            <span class="text-sm opacity-80">Total Aktivitas:</span>
                            <p class="font-semibold" id="displayActivities">0</p>
                        </div>
                    </div>
                </div>

                <!-- Comprehensive Statistics -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-blue-600">Materi Selesai</p>
                                <p class="text-2xl font-bold text-blue-800" id="completedMaterials">0</p>
                            </div>
                            <div class="text-blue-500">üìö</div>
                        </div>
                    </div>
                    <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-green-600">Quiz Dikerjakan</p>
                                <p class="text-2xl font-bold text-green-800" id="completedQuizzes">0</p>
                            </div>
                            <div class="text-green-500">‚úÖ</div>
                        </div>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-purple-600">Rata-rata Nilai</p>
                                <p class="text-2xl font-bold text-purple-800" id="averageScore">0%</p>
                            </div>
                            <div class="text-purple-500">üéØ</div>
                        </div>
                    </div>
                    <div class="bg-orange-50 rounded-lg p-4 border border-orange-200">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-orange-600">Waktu Belajar</p>
                                <p class="text-2xl font-bold text-orange-800" id="totalStudyTime">0 menit</p>
                            </div>
                            <div class="text-orange-500">‚è∞</div>
                        </div>
                    </div>
                </div>

                <!-- Progress Overview -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-blue-50 rounded-lg p-6 border border-blue-200">
                        <h3 class="text-lg font-semibold text-blue-800 mb-4">Ringkasan Progress</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between items-center">
                                <span>Total Materi Selesai:</span>
                                <span class="font-bold text-blue-600" id="completedCount">0/7</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span>Persentase Penyelesaian:</span>
                                <span class="font-bold text-blue-600" id="completionPercentage">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="bg-blue-600 h-3 rounded-full transition-all duration-300" id="progressBar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-green-50 rounded-lg p-6 border border-green-200">
                        <h3 class="text-lg font-semibold text-green-800 mb-4">Status Pembelajaran</h3>
                        <div class="space-y-2" id="learningStatus">
                            <div class="flex items-center">
                                <div class="w-3 h-3 bg-gray-300 rounded-full mr-3"></div>
                                <span class="text-sm">Belum ada data progress</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Progress -->
                <div class="bg-white border border-gray-200 rounded-lg p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Detail Progress Materi</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">No</th>
                                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Materi</th>
                                    <th class="px-4 py-3 text-center text-sm font-semibold text-gray-700">Status</th>
                                    <th class="px-4 py-3 text-center text-sm font-semibold text-gray-700">Waktu Selesai</th>
                                    <th class="px-4 py-3 text-center text-sm font-semibold text-gray-700">Nilai Quiz</th>
                                </tr>
                            </thead>
                            <tbody id="progressTable">
                                <tr class="border-b">
                                    <td class="px-4 py-3">1</td>
                                    <td class="px-4 py-3">Karakteristik Geografis dan Keragaman Alam Indonesia</td>
                                    <td class="px-4 py-3 text-center">
                                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600" id="status-materi1">Belum Selesai</span>
                                    </td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="time-materi1">-</td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="score-materi1">-</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="px-4 py-3">2</td>
                                    <td class="px-4 py-3">Pemanfaatan Sumber Daya Alam Indonesia</td>
                                    <td class="px-4 py-3 text-center">
                                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600" id="status-materi2">Belum Selesai</span>
                                    </td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="time-materi2">-</td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="score-materi2">-</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="px-4 py-3">3</td>
                                    <td class="px-4 py-3">Sumber Daya Manusia Indonesia</td>
                                    <td class="px-4 py-3 text-center">
                                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600" id="status-materi3">Belum Selesai</span>
                                    </td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="time-materi3">-</td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="score-materi3">-</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="px-4 py-3">4</td>
                                    <td class="px-4 py-3">Peran Lembaga Sosial dalam Pemanfaatan Sumber Daya</td>
                                    <td class="px-4 py-3 text-center">
                                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600" id="status-materi4">Belum Selesai</span>
                                    </td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="time-materi4">-</td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="score-materi4">-</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="px-4 py-3">5</td>
                                    <td class="px-4 py-3">Kondisi Geografis dan Interaksi dengan Bangsa Asing</td>
                                    <td class="px-4 py-3 text-center">
                                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600" id="status-materi5">Belum Selesai</span>
                                    </td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="time-materi5">-</td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="score-materi5">-</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="px-4 py-3">6</td>
                                    <td class="px-4 py-3">Evaluasi Pembelajaran</td>
                                    <td class="px-4 py-3 text-center">
                                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600" id="status-evaluasi">Belum Selesai</span>
                                    </td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="time-evaluasi">-</td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="score-evaluasi">-</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="px-4 py-3">7</td>
                                    <td class="px-4 py-3">Refleksi Pembelajaran</td>
                                    <td class="px-4 py-3 text-center">
                                        <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600" id="status-refleksi">Belum Selesai</span>
                                    </td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="time-refleksi">-</td>
                                    <td class="px-4 py-3 text-center text-sm text-gray-500" id="score-refleksi">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Cloud Database Status -->
                <div class="mt-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-6 border border-purple-200">
                    <h3 class="text-lg font-semibold text-purple-800 mb-4">‚òÅÔ∏è Database Cloud Multi-Device</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div class="bg-white p-4 rounded-lg border">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Status Koneksi</p>
                                    <p class="text-lg font-bold text-purple-800" id="connectionStatus">Offline</p>
                                </div>
                                <div class="text-purple-500">üåê</div>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Data Tersinkron</p>
                                    <p class="text-lg font-bold text-green-800" id="syncedDataCount">0</p>
                                </div>
                                <div class="text-green-500">‚úÖ</div>
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-lg border">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Device Aktif</p>
                                    <p class="text-lg font-bold text-blue-800" id="activeDevices">1</p>
                                </div>
                                <div class="text-blue-500">üì±</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg border mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">üîÑ Sinkronisasi Real-time Multi-Device</h4>
                        <p class="text-sm text-gray-600 mb-3">Data siswa tersinkron real-time ke SATU DATABASE TERPUSAT yang dapat diakses dari semua device (HP, tablet, komputer). Semua perubahan langsung terlihat di device lain.</p>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="initCloudDatabase()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm">
                                üöÄ Aktifkan Cloud Database
                            </button>
                            <button onclick="syncAllDataToCloud()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm">
                                ‚òÅÔ∏è Sync Semua Data
                            </button>
                            <button onclick="loadFromCloud()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm">
                                üì• Load dari Cloud
                            </button>
                            <button onclick="viewActiveDevices()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors text-sm">
                                üì± Lihat Device Aktif
                            </button>
                            <button onclick="testCloudConnection()" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors text-sm">
                                üîß Test Koneksi
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                        <h4 class="font-semibold text-yellow-800 mb-2">üìã Petunjuk Multi-Device Terpusat:</h4>
                        <ol class="list-decimal pl-5 text-sm text-yellow-700 space-y-1">
                            <li><strong>Aktifkan Cloud Database</strong> - Semua device akan terhubung ke SATU database yang sama</li>
                            <li><strong>Input dari Device Manapun</strong> - Siswa bisa input data dari HP, tablet, atau komputer manapun</li>
                            <li><strong>Sinkronisasi Real-time</strong> - Perubahan dari satu device langsung terlihat di device lain</li>
                            <li><strong>Kontrol Terpusat</strong> - Guru dapat melihat dan mengontrol semua data dari satu tempat</li>
                            <li><strong>Database Terpusat</strong> - Semua data tersimpan di satu tempat, tidak terpisah per device</li>
                            <li><strong>Update Otomatis</strong> - Sistem otomatis update setiap 5-10 detik</li>
                        </ol>
                        <div class="mt-3 p-2 bg-green-100 rounded border border-green-300">
                            <p class="text-xs text-green-800"><strong>‚úÖ SOLUSI:</strong> Sekarang semua device menggunakan database yang sama. Data input dari HP akan langsung terlihat di komputer guru!</p>
                        </div>
                    </div>
                </div>

                <!-- Comprehensive Database Management -->
                <div class="mt-6 bg-gray-50 rounded-lg p-6 border border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">üóÑÔ∏è Manajemen Database Komprehensif</h3>
                    
                    <!-- Search and Filter -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cari Siswa berdasarkan NIS:</label>
                            <div class="flex">
                                <input type="text" id="searchNIS" class="flex-1 p-2 border border-gray-300 rounded-l-lg" placeholder="Masukkan NIS...">
                                <button onclick="searchStudentByNIS()" class="bg-blue-600 text-white px-4 py-2 rounded-r-lg hover:bg-blue-700 transition-colors">
                                    üîç Cari
                                </button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Filter berdasarkan Kelas:</label>
                            <select id="filterClass" onchange="filterStudentsByClass()" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="">Semua Kelas</option>
                                <option value="8A">8A</option>
                                <option value="8B">8B</option>
                                <option value="8C">8C</option>
                                <option value="8D">8D</option>
                                <option value="8E">8E</option>
                                <option value="8F">8F</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Filter berdasarkan Progress:</label>
                            <select id="filterProgress" onchange="filterStudentsByProgress()" class="w-full p-2 border border-gray-300 rounded-lg">
                                <option value="">Semua Progress</option>
                                <option value="0-25">0-25% (Baru Mulai)</option>
                                <option value="26-50">26-50% (Sedang Berjalan)</option>
                                <option value="51-75">51-75% (Hampir Selesai)</option>
                                <option value="76-100">76-100% (Selesai)</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Database Statistics -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                        <div class="bg-blue-100 p-3 rounded-lg text-center">
                            <p class="text-sm text-blue-600">Total Siswa</p>
                            <p class="text-xl font-bold text-blue-800" id="totalStudentsCount">0</p>
                        </div>
                        <div class="bg-green-100 p-3 rounded-lg text-center">
                            <p class="text-sm text-green-600">Siswa Aktif</p>
                            <p class="text-xl font-bold text-green-800" id="activeStudentsCount">0</p>
                        </div>
                        <div class="bg-yellow-100 p-3 rounded-lg text-center">
                            <p class="text-sm text-yellow-600">Rata-rata Progress</p>
                            <p class="text-xl font-bold text-yellow-800" id="averageProgress">0%</p>
                        </div>
                        <div class="bg-purple-100 p-3 rounded-lg text-center">
                            <p class="text-sm text-purple-600">Total Aktivitas</p>
                            <p class="text-xl font-bold text-purple-800" id="totalActivitiesCount">0</p>
                        </div>
                    </div>
                    
                    <div class="text-center mb-4 space-x-2 flex flex-wrap justify-center gap-2">
                        <button onclick="viewAllStudentsComprehensive()" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            üë• Lihat Semua Data Komprehensif
                        </button>
                        <button onclick="viewDetailedAnalytics()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                            üìà Analisis Detail
                        </button>
                        <button onclick="addComprehensiveDemoData()" class="bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors">
                            üìù Tambah Data Demo
                        </button>
                        <button onclick="exportComprehensiveReport()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            üìä Export Laporan Lengkap
                        </button>
                    </div>
                    
                    <!-- All Students Table -->
                    <div id="allStudentsTable" class="hidden">
                        <h4 class="text-lg font-semibold text-gray-800 mb-3">Data Semua Siswa</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full table-auto border border-gray-300">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="px-4 py-2 border text-left">NIS</th>
                                        <th class="px-4 py-2 border text-left">Nama</th>
                                        <th class="px-4 py-2 border text-left">Kelas</th>
                                        <th class="px-4 py-2 border text-center">Progress</th>
                                        <th class="px-4 py-2 border text-center">Terakhir Update</th>
                                        <th class="px-4 py-2 border text-center">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="allStudentsTableBody">
                                    <!-- Data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Export Options -->
                <div class="mt-6 text-center space-x-4">
                    <button onclick="printReport()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                        üìÑ Cetak Laporan
                    </button>
                    <button onclick="exportToCSV()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors">
                        üìä Export ke CSV
                    </button>
                    <button onclick="exportAllStudentsToCSV()" class="bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors">
                        üìã Export Semua Data
                    </button>
                    <button onclick="resetProgress()" class="bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors">
                        üîÑ Reset Progress
                    </button>
                </div>

                <!-- Sharing and Deployment Options -->
                <div class="mt-8 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-6 border border-purple-200">
                    <h3 class="text-xl font-bold text-purple-800 mb-4">üåê Cara Share ke Siswa & Komputer Client</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Method 1: Direct File Sharing -->
                        <div class="bg-white p-4 rounded-lg border border-purple-200">
                            <h4 class="font-semibold text-purple-800 mb-3">üìÅ Metode 1: Share File HTML</h4>
                            <div class="space-y-3">
                                <button onclick="downloadHTMLFile()" class="w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                                    üíæ Download File HTML
                                </button>
                                <div class="text-sm text-gray-600">
                                    <p class="mb-2"><strong>Langkah-langkah:</strong></p>
                                    <ol class="list-decimal pl-4 space-y-1">
                                        <li>Klik "Download File HTML"</li>
                                        <li>Copy file ke flashdisk/Google Drive</li>
                                        <li>Share ke siswa via WhatsApp/email</li>
                                        <li>Siswa buka file di browser</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Method 2: QR Code Sharing -->
                        <div class="bg-white p-4 rounded-lg border border-purple-200">
                            <h4 class="font-semibold text-purple-800 mb-3">üì± Metode 2: QR Code</h4>
                            <div class="space-y-3">
                                <button onclick="generateQRCode()" class="w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                                    üì≤ Generate QR Code
                                </button>
                                <div id="qrCodeContainer" class="hidden text-center">
                                    <div id="qrCodeDisplay" class="mb-2"></div>
                                    <p class="text-xs text-gray-600">Scan dengan HP untuk akses langsung</p>
                                </div>
                                <div class="text-sm text-gray-600">
                                    <p class="mb-2"><strong>Cara pakai:</strong></p>
                                    <ol class="list-decimal pl-4 space-y-1">
                                        <li>Generate QR Code</li>
                                        <li>Tampilkan di proyektor/layar</li>
                                        <li>Siswa scan dengan HP</li>
                                        <li>Langsung bisa akses</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Method 3: Local Network -->
                        <div class="bg-white p-4 rounded-lg border border-purple-200">
                            <h4 class="font-semibold text-purple-800 mb-3">üåê Metode 3: Local Network</h4>
                            <div class="space-y-3">
                                <button onclick="setupLocalServer()" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                    üñ•Ô∏è Setup Local Server
                                </button>
                                <div class="text-sm text-gray-600">
                                    <p class="mb-2"><strong>Untuk Lab Komputer:</strong></p>
                                    <ol class="list-decimal pl-4 space-y-1">
                                        <li>Setup server di komputer guru</li>
                                        <li>Siswa akses via IP address</li>
                                        <li>Semua data tersinkron real-time</li>
                                        <li>Kontrol penuh dari guru</li>
                                    </ol>
                                </div>
                            </div>
                        </div>

                        <!-- Method 4: Cloud Hosting -->
                        <div class="bg-white p-4 rounded-lg border border-purple-200">
                            <h4 class="font-semibold text-purple-800 mb-3">‚òÅÔ∏è Metode 4: Cloud Hosting</h4>
                            <div class="space-y-3">
                                <button onclick="deployToCloud()" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                    üöÄ Deploy ke Cloud
                                </button>
                                <div class="text-sm text-gray-600">
                                    <p class="mb-2"><strong>Hosting Gratis:</strong></p>
                                    <ul class="list-disc pl-4 space-y-1">
                                        <li>GitHub Pages (gratis)</li>
                                        <li>Netlify (gratis)</li>
                                        <li>Vercel (gratis)</li>
                                        <li>Firebase Hosting (gratis)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Share Options -->
                    <div class="mt-6 bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                        <h4 class="font-semibold text-yellow-800 mb-3">‚ö° Quick Share Options</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                            <button onclick="shareViaWhatsApp()" class="bg-green-500 text-white px-3 py-2 rounded text-sm hover:bg-green-600 transition-colors">
                                üì± WhatsApp
                            </button>
                            <button onclick="shareViaEmail()" class="bg-blue-500 text-white px-3 py-2 rounded text-sm hover:bg-blue-600 transition-colors">
                                üìß Email
                            </button>
                            <button onclick="copyShareLink()" class="bg-purple-500 text-white px-3 py-2 rounded text-sm hover:bg-purple-600 transition-colors">
                                üîó Copy Link
                            </button>
                            <button onclick="generateBatchFiles()" class="bg-orange-500 text-white px-3 py-2 rounded text-sm hover:bg-orange-600 transition-colors">
                                üì¶ Batch Files
                            </button>
                        </div>
                    </div>

                    <!-- Network Setup Guide -->
                    <div class="mt-6 bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <h4 class="font-semibold text-blue-800 mb-3">üîß Panduan Setup Network Lab</h4>
                        <div class="text-sm text-gray-700">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <p class="font-medium mb-2">Untuk Windows:</p>
                                    <ol class="list-decimal pl-4 space-y-1">
                                        <li>Buka Command Prompt as Administrator</li>
                                        <li>Ketik: <code class="bg-gray-200 px-1 rounded">python -m http.server 8000</code></li>
                                        <li>Atau: <code class="bg-gray-200 px-1 rounded">npx http-server</code></li>
                                        <li>Akses via: http://[IP-GURU]:8000</li>
                                    </ol>
                                </div>
                                <div>
                                    <p class="font-medium mb-2">IP Address Info:</p>
                                    <div class="bg-white p-2 rounded border">
                                        <p id="currentIP" class="text-xs">Detecting IP...</p>
                                        <button onclick="detectNetworkInfo()" class="mt-1 bg-blue-500 text-white px-2 py-1 rounded text-xs">
                                            üîç Detect Network
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gray-800 text-white p-6 mt-12">
        <div class="container mx-auto text-center">
            <p>&copy; 2025 SMP Negeri 2 Kota Sukabumi. Media Pembelajaran IPS oleh Engkus Kusnandar, CCNA, S.E, Gr</p>
            <p class="text-sm mt-2">Dikembangkan untuk mendukung pembelajaran yang interaktif dan bermakna</p>
        </div>
    </footer>

    <script>
        // Cloud Database Configuration
        const firebaseConfig = {
            // Demo configuration - in production, use your own Firebase config
            apiKey: "demo-api-key",
            authDomain: "demo-project.firebaseapp.com",
            projectId: "demo-project",
            storageBucket: "demo-project.appspot.com",
            messagingSenderId: "123456789",
            appId: "demo-app-id"
        };

        // Cloud database variables
        let cloudDB = null;
        let isCloudConnected = false;
        let cloudSyncInterval = null;

        // Database simulation using IndexedDB for better data persistence
        let db;
        let studentProgress = {
            studentInfo: {
                name: '',
                class: '',
                nis: ''
            },
            materials: {
                materi1: { completed: false, completedAt: null, score: null },
                materi2: { completed: false, completedAt: null, score: null },
                materi3: { completed: false, completedAt: null, score: null },
                materi4: { completed: false, completedAt: null, score: null },
                materi5: { completed: false, completedAt: null, score: null },
                evaluasi: { completed: false, completedAt: null, score: null },
                refleksi: { completed: false, completedAt: null, score: null }
            }
        };

        // Initialize Cloud Database with real Firebase connection
        function initCloudDatabase() {
            try {
                // Show connecting status immediately
                updateCloudStatus('connecting', 'Menghubungkan ke server...');
                console.log('Initializing Cloud Database...');
                
                // Check internet connection first
                if (!navigator.onLine) {
                    updateCloudStatus('error', 'Tidak ada koneksi internet');
                    alert('‚ùå Tidak ada koneksi internet!\n\nCloud Database memerlukan koneksi internet untuk berfungsi.\nSilakan periksa koneksi Anda dan coba lagi.');
                    return;
                }
                
                // Initialize Firebase (using demo config for now)
                // In production, replace with your actual Firebase config
                try {
                    // For demo purposes, we'll simulate a real cloud database using a shared storage approach
                    // In production, you would use: firebase.initializeApp(firebaseConfig);
                    
                    // Create a unique session ID for this browser/device
                    const sessionId = generateSessionId();
                    localStorage.setItem('deviceSessionId', sessionId);
                    
                    // Simulate cloud connection with realistic delay
                    setTimeout(() => {
                        isCloudConnected = true;
                        updateCloudStatus('connected', 'Terhubung ke Cloud Database');
                        
                        // Initialize shared cloud storage simulation
                        initializeSharedCloudStorage();
                        
                        // Start auto-sync every 10 seconds for real-time updates
                        startCloudSync();
                        
                        // Sync current data to cloud immediately
                        syncToCloud();
                        
                        // Load existing data from cloud
                        setTimeout(() => {
                            loadFromCloud();
                        }, 1000);
                        
                        // Start real-time listener for changes from other devices
                        startRealTimeListener();
                        
                        // Update device count
                        updateActiveDeviceCount();
                        
                        // Show success message
                        alert('‚úÖ Cloud Database berhasil diaktifkan!\n\nüåê MULTI-DEVICE SYNC AKTIF:\n‚Ä¢ Data tersinkron real-time ke semua device\n‚Ä¢ HP, tablet, komputer dapat akses data yang sama\n‚Ä¢ Perubahan dari device lain langsung terlihat\n‚Ä¢ Satu database terpusat untuk semua device\n\nüì± Sekarang semua device terhubung ke database yang sama!\n\nüîÑ Auto-sync: Setiap 10 detik\n‚ö° Real-time: Update langsung dari device lain');
                        
                    }, 2000);
                    
                } catch (firebaseError) {
                    console.error('Firebase initialization error:', firebaseError);
                    // Fallback to enhanced localStorage simulation
                    initializeEnhancedLocalStorage();
                }
                
            } catch (error) {
                console.error('Error initializing cloud database:', error);
                updateCloudStatus('error', 'Gagal terhubung ke cloud');
                alert('‚ùå Gagal menghubungkan ke Cloud Database.\n\nError: ' + error.message + '\n\nMenggunakan mode offline saja.\nData tetap tersimpan di device ini.');
            }
        }

        // Update cloud status display
        function updateCloudStatus(status, message) {
            const indicator = document.getElementById('cloudIndicator');
            const statusText = document.getElementById('cloudStatusText');
            const connectionStatus = document.getElementById('connectionStatus');
            const lastSyncTime = document.getElementById('lastSyncTime');
            
            switch(status) {
                case 'connected':
                    indicator.className = 'w-3 h-3 bg-green-500 rounded-full mr-2';
                    statusText.textContent = 'Status Cloud: ' + message;
                    connectionStatus.textContent = 'Online';
                    connectionStatus.className = 'text-lg font-bold text-green-800';
                    lastSyncTime.textContent = 'Terakhir sync: ' + new Date().toLocaleString('id-ID');
                    break;
                case 'connecting':
                    indicator.className = 'w-3 h-3 bg-yellow-500 rounded-full mr-2';
                    statusText.textContent = 'Status Cloud: ' + message;
                    connectionStatus.textContent = 'Connecting...';
                    connectionStatus.className = 'text-lg font-bold text-yellow-800';
                    break;
                case 'error':
                    indicator.className = 'w-3 h-3 bg-red-500 rounded-full mr-2';
                    statusText.textContent = 'Status Cloud: ' + message;
                    connectionStatus.textContent = 'Error';
                    connectionStatus.className = 'text-lg font-bold text-red-800';
                    break;
                default:
                    indicator.className = 'w-3 h-3 bg-gray-400 rounded-full mr-2';
                    statusText.textContent = 'Status Cloud: Offline';
                    connectionStatus.textContent = 'Offline';
                    connectionStatus.className = 'text-lg font-bold text-gray-800';
            }
        }

        // Generate unique session ID for device identification
        function generateSessionId() {
            return 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Initialize shared cloud storage simulation
        function initializeSharedCloudStorage() {
            // Create a shared storage key that all devices can access
            const sharedStorageKey = 'SHARED_CLOUD_DATABASE_IPS_SMPN2_SUKABUMI';
            
            // Initialize shared storage if it doesn't exist
            if (!localStorage.getItem(sharedStorageKey)) {
                const initialCloudData = {
                    students: [],
                    progress: [],
                    comprehensive: [],
                    devices: {},
                    lastUpdate: new Date().toISOString(),
                    version: 1
                };
                localStorage.setItem(sharedStorageKey, JSON.stringify(initialCloudData));
                console.log('Shared cloud storage initialized');
            }
            
            // Register this device
            registerDevice();
        }

        // Register device in shared cloud storage
        function registerDevice() {
            const sessionId = localStorage.getItem('deviceSessionId');
            const sharedStorageKey = 'SHARED_CLOUD_DATABASE_IPS_SMPN2_SUKABUMI';
            
            try {
                const cloudData = JSON.parse(localStorage.getItem(sharedStorageKey) || '{}');
                
                cloudData.devices = cloudData.devices || {};
                cloudData.devices[sessionId] = {
                    deviceType: getDeviceType(),
                    userAgent: navigator.userAgent.substring(0, 100),
                    lastSeen: new Date().toISOString(),
                    currentStudent: studentProgress.studentInfo.name || 'Tidak ada',
                    ipAddress: 'Simulated IP', // In real app, you'd get actual IP
                    status: 'active'
                };
                
                localStorage.setItem(sharedStorageKey, JSON.stringify(cloudData));
                console.log('Device registered in shared cloud storage');
                
            } catch (error) {
                console.error('Error registering device:', error);
            }
        }

        // Update active device count
        function updateActiveDeviceCount() {
            const sharedStorageKey = 'SHARED_CLOUD_DATABASE_IPS_SMPN2_SUKABUMI';
            
            try {
                const cloudData = JSON.parse(localStorage.getItem(sharedStorageKey) || '{}');
                const devices = cloudData.devices || {};
                
                // Count active devices (last seen within 5 minutes)
                const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000);
                let activeCount = 0;
                
                Object.values(devices).forEach(device => {
                    if (new Date(device.lastSeen) > fiveMinutesAgo) {
                        activeCount++;
                    }
                });
                
                document.getElementById('activeDevices').textContent = activeCount + ' device aktif';
                
            } catch (error) {
                console.error('Error updating device count:', error);
                document.getElementById('activeDevices').textContent = '1 device';
            }
        }

        // Start real-time listener for changes from other devices
        function startRealTimeListener() {
            // Check for changes every 5 seconds
            setInterval(() => {
                if (isCloudConnected) {
                    checkForCloudUpdates();
                }
            }, 5000);
        }

        // Check for updates from other devices
        function checkForCloudUpdates() {
            const sharedStorageKey = 'SHARED_CLOUD_DATABASE_IPS_SMPN2_SUKABUMI';
            const lastKnownVersion = localStorage.getItem('lastKnownCloudVersion') || '0';
            
            try {
                const cloudData = JSON.parse(localStorage.getItem(sharedStorageKey) || '{}');
                const currentVersion = cloudData.version || 0;
                
                if (currentVersion > parseInt(lastKnownVersion)) {
                    console.log('Cloud data updated by another device, syncing...');
                    
                    // Update local data with cloud data
                    if (cloudData.students) {
                        localStorage.setItem('allStudents', JSON.stringify(cloudData.students));
                    }
                    if (cloudData.progress) {
                        localStorage.setItem('allProgress', JSON.stringify(cloudData.progress));
                    }
                    if (cloudData.comprehensive) {
                        localStorage.setItem('comprehensiveStudentDB', JSON.stringify(cloudData.comprehensive));
                    }
                    
                    // Update displays
                    updateProgressDisplay();
                    updateComprehensiveStatistics();
                    
                    // Update known version
                    localStorage.setItem('lastKnownCloudVersion', currentVersion.toString());
                    
                    // Show notification of update
                    showCloudUpdateNotification();
                }
                
                // Update device status
                registerDevice();
                updateActiveDeviceCount();
                
            } catch (error) {
                console.error('Error checking cloud updates:', error);
            }
        }

        // Show notification when data is updated from another device
        function showCloudUpdateNotification() {
            // Create a subtle notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300';
            notification.innerHTML = 'üîÑ Data diperbarui dari device lain';
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Start cloud sync interval with faster updates
        function startCloudSync() {
            if (cloudSyncInterval) {
                clearInterval(cloudSyncInterval);
            }
            
            cloudSyncInterval = setInterval(() => {
                if (isCloudConnected) {
                    syncToCloud();
                }
            }, 10000); // Sync every 10 seconds for real-time feel
        }

        // Sync data to shared cloud storage
        function syncToCloud() {
            if (!isCloudConnected) {
                console.log('Cloud not connected, skipping sync');
                return false;
            }
            
            try {
                const sharedStorageKey = 'SHARED_CLOUD_DATABASE_IPS_SMPN2_SUKABUMI';
                
                // Get all local data
                const allStudents = JSON.parse(localStorage.getItem('allStudents') || '[]');
                const allProgress = JSON.parse(localStorage.getItem('allProgress') || '[]');
                const comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                const currentProgress = JSON.parse(localStorage.getItem('studentProgress') || '{}');
                
                // Get existing cloud data
                const existingCloudData = JSON.parse(localStorage.getItem(sharedStorageKey) || '{}');
                
                // Merge data intelligently (avoid overwriting data from other devices)
                const mergedStudents = mergeArrayData(existingCloudData.students || [], allStudents, 'nis');
                const mergedProgress = mergeArrayData(existingCloudData.progress || [], allProgress, 'nis');
                const mergedComprehensive = mergeArrayData(existingCloudData.comprehensive || [], comprehensiveDB, 'studentInfo.nis');
                
                // Create updated cloud data
                const updatedCloudData = {
                    students: mergedStudents,
                    progress: mergedProgress,
                    comprehensive: mergedComprehensive,
                    devices: existingCloudData.devices || {},
                    lastUpdate: new Date().toISOString(),
                    version: (existingCloudData.version || 0) + 1,
                    lastSyncDevice: localStorage.getItem('deviceSessionId'),
                    syncHistory: [
                        ...(existingCloudData.syncHistory || []).slice(-10), // Keep last 10 syncs
                        {
                            deviceId: localStorage.getItem('deviceSessionId'),
                            deviceType: getDeviceType(),
                            timestamp: new Date().toISOString(),
                            dataCount: {
                                students: allStudents.length,
                                progress: allProgress.length,
                                comprehensive: comprehensiveDB.length
                            }
                        }
                    ]
                };
                
                // Update device info
                const sessionId = localStorage.getItem('deviceSessionId');
                updatedCloudData.devices[sessionId] = {
                    deviceType: getDeviceType(),
                    userAgent: navigator.userAgent.substring(0, 100),
                    lastSeen: new Date().toISOString(),
                    currentStudent: currentProgress.studentInfo?.name || 'Tidak ada',
                    status: 'active',
                    lastSync: new Date().toISOString()
                };
                
                // Save to shared cloud storage
                localStorage.setItem(sharedStorageKey, JSON.stringify(updatedCloudData));
                
                // Update local version tracking
                localStorage.setItem('lastKnownCloudVersion', updatedCloudData.version.toString());
                
                // Update UI elements
                const syncedCount = Math.max(mergedStudents.length, mergedComprehensive.length);
                document.getElementById('syncedDataCount').textContent = syncedCount;
                document.getElementById('lastSyncTime').textContent = 'Terakhir sync: ' + new Date().toLocaleString('id-ID');
                
                // Update connection status
                updateCloudStatus('connected', `Tersinkron ke cloud (${syncedCount} data, v${updatedCloudData.version})`);
                
                console.log('‚úÖ Data berhasil disinkron ke shared cloud - Version:', updatedCloudData.version);
                console.log('Merged data counts:', {
                    students: mergedStudents.length,
                    progress: mergedProgress.length,
                    comprehensive: mergedComprehensive.length
                });
                
                return true;
                
            } catch (error) {
                console.error('Error syncing to cloud:', error);
                updateCloudStatus('error', 'Gagal sync ke cloud: ' + error.message);
                return false;
            }
        }

        // Merge array data intelligently to avoid conflicts
        function mergeArrayData(cloudArray, localArray, keyPath) {
            const merged = [...cloudArray];
            
            localArray.forEach(localItem => {
                const key = getNestedValue(localItem, keyPath);
                const existingIndex = merged.findIndex(cloudItem => getNestedValue(cloudItem, keyPath) === key);
                
                if (existingIndex !== -1) {
                    // Update existing item with newer data
                    const cloudItem = merged[existingIndex];
                    const localTimestamp = new Date(localItem.lastUpdated || localItem.timestamp || 0);
                    const cloudTimestamp = new Date(cloudItem.lastUpdated || cloudItem.timestamp || 0);
                    
                    if (localTimestamp >= cloudTimestamp) {
                        merged[existingIndex] = localItem;
                    }
                } else {
                    // Add new item
                    merged.push(localItem);
                }
            });
            
            return merged;
        }

        // Get nested value from object using dot notation
        function getNestedValue(obj, path) {
            return path.split('.').reduce((current, key) => current && current[key], obj);
        }

        // Load data from shared cloud storage
        function loadFromCloud() {
            if (!isCloudConnected) {
                alert('Cloud database belum terhubung. Klik "Aktifkan Cloud Database" terlebih dahulu.');
                return;
            }
            
            try {
                const sharedStorageKey = 'SHARED_CLOUD_DATABASE_IPS_SMPN2_SUKABUMI';
                const cloudData = JSON.parse(localStorage.getItem(sharedStorageKey) || '{}');
                
                if (cloudData.students || cloudData.progress || cloudData.comprehensive) {
                    // Load cloud data to local storage
                    if (cloudData.students) {
                        localStorage.setItem('allStudents', JSON.stringify(cloudData.students));
                    }
                    if (cloudData.progress) {
                        localStorage.setItem('allProgress', JSON.stringify(cloudData.progress));
                    }
                    if (cloudData.comprehensive) {
                        localStorage.setItem('comprehensiveStudentDB', JSON.stringify(cloudData.comprehensive));
                    }
                    
                    // Update version tracking
                    localStorage.setItem('lastKnownCloudVersion', (cloudData.version || 0).toString());
                    
                    // Update displays
                    updateProgressDisplay();
                    updateComprehensiveStatistics();
                    
                    // Show device information
                    const deviceCount = Object.keys(cloudData.devices || {}).length;
                    const lastSyncDevice = cloudData.lastSyncDevice;
                    const lastUpdate = new Date(cloudData.lastUpdate).toLocaleString('id-ID');
                    
                    alert(`‚úÖ Data berhasil dimuat dari shared cloud database!\n\nüìä Data yang dimuat:\n‚Ä¢ ${cloudData.students?.length || 0} siswa\n‚Ä¢ ${cloudData.progress?.length || 0} progress\n‚Ä¢ ${cloudData.comprehensive?.length || 0} data komprehensif\n\nüåê Info Cloud:\n‚Ä¢ ${deviceCount} device terdaftar\n‚Ä¢ Versi database: v${cloudData.version || 0}\n‚Ä¢ Update terakhir: ${lastUpdate}\n\nüîÑ Semua data dari device lain sudah tersinkron!`);
                    
                } else {
                    alert('üì≠ Belum ada data di shared cloud database.\n\nData akan otomatis tersimpan ke cloud saat ada siswa yang mulai menggunakan sistem dari device manapun.');
                }
                
            } catch (error) {
                console.error('Error loading from cloud:', error);
                alert('‚ùå Gagal memuat data dari cloud: ' + error.message);
            }
        }

        // Manual sync from home page
        function manualSyncToCloud() {
            if (!isCloudConnected) {
                alert('‚ö†Ô∏è Cloud Database belum aktif!\n\nKlik tombol di bawah untuk mengaktifkan Cloud Database terlebih dahulu.');
                return;
            }
            
            // Show syncing status
            updateCloudStatus('connecting', 'Melakukan sinkronisasi...');
            
            setTimeout(() => {
                const success = syncToCloud();
                
                if (success) {
                    const cloudData = JSON.parse(localStorage.getItem('cloudBackup') || '{}');
                    const syncCount = cloudData.syncCount || 0;
                    const dataCount = Math.max(
                        cloudData.students?.length || 0,
                        cloudData.comprehensive?.length || 0
                    );
                    
                    alert('‚úÖ Sinkronisasi berhasil!\n\nüìä Data tersinkron:\n‚Ä¢ ' + dataCount + ' siswa\n‚Ä¢ Sync ke-' + syncCount + '\n‚è∞ ' + new Date().toLocaleString('id-ID') + '\n\n‚òÅÔ∏è Data dapat diakses dari HP/komputer lain!');
                } else {
                    alert('‚ùå Sinkronisasi gagal!\n\nPeriksa koneksi internet dan coba lagi.');
                }
            }, 1000);
        }

        // Sync all data to cloud
        function syncAllDataToCloud() {
            if (!isCloudConnected) {
                alert('‚ö†Ô∏è Cloud Database belum aktif!\n\nKlik "Aktifkan Cloud Database" terlebih dahulu untuk menggunakan fitur sinkronisasi.');
                return;
            }
            
            // Show syncing status
            updateCloudStatus('connecting', 'Melakukan sinkronisasi manual...');
            
            setTimeout(() => {
                const success = syncToCloud();
                
                if (success) {
                    const cloudData = JSON.parse(localStorage.getItem('cloudBackup') || '{}');
                    const syncCount = cloudData.syncCount || 0;
                    const dataCount = Math.max(
                        cloudData.students?.length || 0,
                        cloudData.comprehensive?.length || 0
                    );
                    
                    alert('‚úÖ Sinkronisasi manual berhasil!\n\nüìä Data yang disinkron:\n‚Ä¢ ' + dataCount + ' siswa\n‚Ä¢ ' + (cloudData.progress?.length || 0) + ' progress\n‚Ä¢ ' + (cloudData.comprehensive?.length || 0) + ' data komprehensif\n\nüîÑ Sync ke-' + syncCount + '\n‚è∞ Waktu: ' + new Date().toLocaleString('id-ID') + '\n\n‚òÅÔ∏è Semua data tersimpan di cloud dan dapat diakses dari device lain!');
                } else {
                    alert('‚ùå Sinkronisasi gagal!\n\nSilakan periksa koneksi internet dan coba lagi.');
                }
            }, 1500);
        }

        // Test cloud connection
        function testCloudConnection() {
            updateCloudStatus('connecting', 'Testing koneksi...');
            
            setTimeout(() => {
                const isOnline = navigator.onLine;
                if (isOnline) {
                    updateCloudStatus('connected', 'Koneksi berhasil');
                    alert('‚úÖ Test koneksi berhasil!\n\nüåê Status:\n‚Ä¢ Internet: Terhubung\n‚Ä¢ Server: Dapat diakses\n‚Ä¢ Multi-device: Siap digunakan\n\nüì± Anda dapat mengakses dari HP atau komputer lain.');
                } else {
                    updateCloudStatus('error', 'Tidak ada koneksi internet');
                    alert('‚ùå Test koneksi gagal!\n\nüì∂ Periksa koneksi internet Anda.\nSistem akan bekerja dalam mode offline.');
                }
            }, 2000);
        }

        // Auto-save to cloud when data changes
        function autoSaveToCloud() {
            if (isCloudConnected) {
                setTimeout(() => {
                    syncToCloud();
                }, 1000); // Delay 1 second to batch multiple changes
            }
        }

        // Initialize database with localStorage as primary storage
        function initDatabase() {
            // Use localStorage as primary storage for better compatibility
            loadProgress();
            
            // Check if cloud was previously connected
            const cloudBackup = localStorage.getItem('cloudBackup');
            if (cloudBackup) {
                updateCloudStatus('connected', 'Tersimpan di cloud (klik sync untuk update)');
                document.getElementById('syncedDataCount').textContent = JSON.parse(cloudBackup).students?.length || 0;
            }
            
            // Try to initialize IndexedDB as secondary storage
            try {
                const request = indexedDB.open('StudentLearningDB', 1);
                
                request.onsuccess = function(event) {
                    db = event.target.result;
                    console.log('IndexedDB initialized successfully');
                };
                
                request.onupgradeneeded = function(event) {
                    db = event.target.result;
                    
                    // Create object stores
                    if (!db.objectStoreNames.contains('students')) {
                        const studentStore = db.createObjectStore('students', { keyPath: 'nis' });
                        studentStore.createIndex('name', 'name', { unique: false });
                        studentStore.createIndex('class', 'class', { unique: false });
                    }
                    
                    if (!db.objectStoreNames.contains('progress')) {
                        const progressStore = db.createObjectStore('progress', { keyPath: 'nis' });
                        progressStore.createIndex('timestamp', 'timestamp', { unique: false });
                    }
                };
                
                request.onerror = function(event) {
                    console.log('IndexedDB not available, using localStorage only');
                };
            } catch (error) {
                console.log('IndexedDB not supported, using localStorage only');
            }
        }

        // Save student to database
        function saveStudentToDatabase(studentData) {
            try {
                // Save to localStorage first (primary storage)
                let allStudents = JSON.parse(localStorage.getItem('allStudents') || '[]');
                
                // Check if student already exists
                const existingIndex = allStudents.findIndex(s => s.nis === studentData.nis);
                
                const studentRecord = {
                    nis: studentData.nis,
                    name: studentData.name,
                    class: studentData.class,
                    createdAt: existingIndex === -1 ? new Date().toISOString() : allStudents[existingIndex].createdAt,
                    lastUpdated: new Date().toISOString()
                };
                
                if (existingIndex !== -1) {
                    allStudents[existingIndex] = studentRecord;
                    console.log('Updated existing student:', studentRecord);
                } else {
                    allStudents.push(studentRecord);
                    console.log('Added new student:', studentRecord);
                }
                
                // Save to localStorage
                localStorage.setItem('allStudents', JSON.stringify(allStudents));
                console.log('All students saved to localStorage:', allStudents.length, 'students');
                
                // Also save to IndexedDB if available
                if (db) {
                    try {
                        const transaction = db.transaction(['students'], 'readwrite');
                        const store = transaction.objectStore('students');
                        store.put(studentRecord);
                        console.log('Student saved to IndexedDB');
                    } catch (error) {
                        console.log('Error saving to IndexedDB:', error);
                    }
                }
                
                // Save current progress
                saveProgress();
                
                return true;
                
            } catch (error) {
                console.error('Error in saveStudentToDatabase:', error);
                throw error;
            }
        }

        // Save progress to database
        function saveProgressToDatabase() {
            if (!studentProgress.studentInfo.nis) {
                saveProgress();
                return;
            }
            
            // Save to localStorage (primary storage)
            let allProgress = JSON.parse(localStorage.getItem('allProgress') || '[]');
            
            const progressRecord = {
                nis: studentProgress.studentInfo.nis,
                materials: studentProgress.materials,
                timestamp: new Date().toISOString(),
                completionPercentage: calculateCompletionPercentage()
            };
            
            // Remove old progress for this student and add new one
            allProgress = allProgress.filter(p => p.nis !== studentProgress.studentInfo.nis);
            allProgress.push(progressRecord);
            
            localStorage.setItem('allProgress', JSON.stringify(allProgress));
            
            // Also save to IndexedDB if available
            if (db) {
                try {
                    const transaction = db.transaction(['progress'], 'readwrite');
                    const store = transaction.objectStore('progress');
                    store.put(progressRecord);
                } catch (error) {
                    console.log('Error saving progress to IndexedDB:', error);
                }
            }
            
            saveProgress();
        }

        // Load from database
        function loadFromDatabase() {
            if (!db) {
                loadProgress(); // Fallback to localStorage
                return;
            }
            
            // First try to load from localStorage for current session
            const saved = localStorage.getItem('studentProgress');
            if (saved) {
                studentProgress = JSON.parse(saved);
                updateProgressDisplay();
                updateStudentInfoDisplay();
                
                // If we have student info, also load from database
                if (studentProgress.studentInfo.nis) {
                    loadStudentFromDatabase(studentProgress.studentInfo.nis);
                }
            }
        }

        // Load student from database
        function loadStudentFromDatabase(nis) {
            if (!db) return;
            
            const transaction = db.transaction(['students', 'progress'], 'readonly');
            const studentStore = transaction.objectStore('students');
            const progressStore = transaction.objectStore('progress');
            
            const studentRequest = studentStore.get(nis);
            
            studentRequest.onsuccess = function() {
                if (studentRequest.result) {
                    const student = studentRequest.result;
                    studentProgress.studentInfo = {
                        name: student.name,
                        class: student.class,
                        nis: student.nis
                    };
                    
                    // Load latest progress
                    const progressIndex = progressStore.index('nis');
                    const progressRequest = progressIndex.getAll(nis);
                    
                    progressRequest.onsuccess = function() {
                        const progressRecords = progressRequest.result;
                        if (progressRecords.length > 0) {
                            // Get the latest progress record
                            const latestProgress = progressRecords[progressRecords.length - 1];
                            studentProgress.materials = latestProgress.materials;
                        }
                        
                        updateProgressDisplay();
                        updateStudentInfoDisplay();
                        saveProgress(); // Update localStorage
                    };
                }
            };
        }

        // Calculate completion percentage
        function calculateCompletionPercentage() {
            const materials = studentProgress.materials;
            let completed = 0;
            const total = Object.keys(materials).length;
            
            Object.keys(materials).forEach(materialId => {
                if (materials[materialId].completed) {
                    completed++;
                }
            });
            
            return Math.round((completed / total) * 100);
        }

        // Get all students from database (for admin/teacher view)
        function getAllStudentsFromDatabase() {
            return new Promise((resolve, reject) => {
                try {
                    // Get data from localStorage
                    const allStudents = JSON.parse(localStorage.getItem('allStudents') || '[]');
                    const allProgress = JSON.parse(localStorage.getItem('allProgress') || '[]');
                    
                    // Combine students with their progress
                    const studentsWithProgress = allStudents.map(student => {
                        const progress = allProgress.find(p => p.nis === student.nis);
                        return {
                            ...student,
                            progress: progress || null
                        };
                    });
                    
                    resolve(studentsWithProgress);
                } catch (error) {
                    reject('Error loading students: ' + error.message);
                }
            });
        }

        // Save reflection to database
        function saveReflectionToDatabase(reflectionData) {
            if (!db || !studentProgress.studentInfo.nis) {
                return;
            }
            
            const transaction = db.transaction(['reflections'], 'readwrite');
            const store = transaction.objectStore('reflections');
            
            const reflectionRecord = {
                nis: studentProgress.studentInfo.nis,
                reflections: reflectionData,
                timestamp: new Date().toISOString()
            };
            
            store.add(reflectionRecord);
        }

        // Load progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('studentProgress');
            if (saved) {
                studentProgress = JSON.parse(saved);
                updateProgressDisplay();
                updateStudentInfoDisplay();
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            try {
                localStorage.setItem('studentProgress', JSON.stringify(studentProgress));
                console.log('Progress saved to localStorage:', studentProgress);
                return true;
            } catch (error) {
                console.error('Error saving progress:', error);
                return false;
            }
        }

        // Save student information with comprehensive tracking
        function saveStudentInfo() {
            const name = document.getElementById('studentName').value.trim();
            const studentClass = document.getElementById('studentClass').value;
            const nis = document.getElementById('studentNIS').value.trim();

            if (!name || !studentClass || !nis) {
                alert('Mohon lengkapi semua data siswa!');
                return;
            }

            // Validate NIS format (should be numbers only)
            if (!/^\d+$/.test(nis)) {
                alert('NIS harus berupa angka saja!');
                return;
            }

            try {
                const studentData = { 
                    name, 
                    class: studentClass, 
                    nis,
                    registeredAt: new Date().toISOString(),
                    lastActivity: new Date().toISOString()
                };
                
                // Update current session data
                studentProgress.studentInfo = studentData;
                
                // Initialize comprehensive tracking
                initializeStudentTracking(studentData);
                
                // Save to localStorage immediately
                saveProgress();
                
                // Save to comprehensive database
                saveStudentToDatabase(studentData);
                
                // Auto-sync to cloud if connected
                autoSaveToCloud();
                
                // Update display
                updateStudentInfoDisplay();
                
                // Show success message with tracking info
                const cloudMessage = isCloudConnected ? '\n\n‚òÅÔ∏è Data juga tersimpan ke cloud dan dapat diakses dari HP/komputer lain!' : '\n\nüí° Aktifkan Cloud Database untuk akses multi-device!';
                alert('‚úÖ Data siswa berhasil disimpan dan sistem tracking diaktifkan!\n\nNama: ' + name + '\nKelas: ' + studentClass + '\nNIS: ' + nis + '\n\nüìä Semua aktivitas pembelajaran akan tercatat secara otomatis.' + cloudMessage);
                
                console.log('Student data saved with comprehensive tracking:', studentData);
                
            } catch (error) {
                console.error('Error saving student data:', error);
                alert('‚ùå Terjadi kesalahan saat menyimpan data: ' + error.message);
            }
        }

        // Initialize comprehensive student tracking
        function initializeStudentTracking(studentData) {
            // Create comprehensive student record
            const comprehensiveRecord = {
                studentInfo: studentData,
                learningActivities: [],
                quizResults: {},
                reflectionAnswers: {},
                timeSpent: {},
                completionTimestamps: {},
                overallProgress: 0,
                createdAt: new Date().toISOString(),
                lastUpdated: new Date().toISOString()
            };

            // Save to comprehensive database
            let comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
            
            // Remove existing record for this NIS
            comprehensiveDB = comprehensiveDB.filter(record => record.studentInfo.nis !== studentData.nis);
            
            // Add new comprehensive record
            comprehensiveDB.push(comprehensiveRecord);
            
            localStorage.setItem('comprehensiveStudentDB', JSON.stringify(comprehensiveDB));
            
            console.log('Comprehensive tracking initialized for:', studentData.name);
        }

        // Update student info display
        function updateStudentInfoDisplay() {
            const info = studentProgress.studentInfo;
            document.getElementById('displayName').textContent = info.name || 'Belum diisi';
            document.getElementById('displayClass').textContent = info.class || 'Belum diisi';
            document.getElementById('displayNIS').textContent = info.nis || 'Belum diisi';
        }

        // Mark material as complete with comprehensive tracking
        function markMaterialComplete(materialId) {
            if (!studentProgress.studentInfo.name) {
                alert('Mohon isi data siswa terlebih dahulu di halaman Beranda!');
                return;
            }

            const completionTime = new Date().toLocaleString('id-ID');
            const completionTimestamp = new Date().toISOString();
            
            // Update material progress
            studentProgress.materials[materialId].completed = true;
            studentProgress.materials[materialId].completedAt = completionTime;
            
            // Update progress indicator
            const indicator = document.getElementById(`progress-${materialId}`);
            if (indicator) {
                indicator.classList.remove('border-gray-300');
                indicator.classList.add('border-green-500', 'bg-green-500');
                indicator.querySelector('svg').classList.remove('hidden');
            }

            // Record comprehensive activity
            recordLearningActivity({
                type: 'material_completion',
                materialId: materialId,
                materialName: getMaterialName(materialId),
                timestamp: completionTimestamp,
                details: {
                    completedAt: completionTime,
                    sessionDuration: calculateSessionDuration(materialId)
                }
            });

            // Save to both database and localStorage
            saveProgressToDatabase();
            updateProgressDisplay();
            updateComprehensiveRecord();
            
            // Auto-sync to cloud if connected
            autoSaveToCloud();
            
            const cloudMessage = isCloudConnected ? '\n\n‚òÅÔ∏è Progress tersinkron ke cloud - dapat dilihat dari device lain!' : '';
            alert(`‚úÖ ${getMaterialName(materialId)} telah diselesaikan!\n\nüìä Progress tersimpan ke database komprehensif\n‚è∞ Waktu penyelesaian: ${completionTime}${cloudMessage}`);
        }

        // Record learning activity for comprehensive tracking
        function recordLearningActivity(activity) {
            if (!studentProgress.studentInfo.nis) return;

            try {
                let comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                const studentRecord = comprehensiveDB.find(record => record.studentInfo.nis === studentProgress.studentInfo.nis);
                
                if (studentRecord) {
                    // Add activity to learning activities
                    studentRecord.learningActivities.push(activity);
                    
                    // Update timestamps
                    studentRecord.completionTimestamps[activity.materialId] = activity.timestamp;
                    
                    // Update last activity
                    studentRecord.lastUpdated = activity.timestamp;
                    studentRecord.studentInfo.lastActivity = activity.timestamp;
                    
                    // Save back to database
                    localStorage.setItem('comprehensiveStudentDB', JSON.stringify(comprehensiveDB));
                    
                    console.log('Learning activity recorded:', activity);
                }
            } catch (error) {
                console.error('Error recording learning activity:', error);
            }
        }

        // Calculate session duration (simplified)
        function calculateSessionDuration(materialId) {
            // This is a simplified calculation - in a real app, you'd track actual time spent
            return Math.floor(Math.random() * 30) + 10; // Random 10-40 minutes for demo
        }

        // Get material name
        function getMaterialName(materialId) {
            const names = {
                materi1: 'Materi 1: Karakteristik Geografis',
                materi2: 'Materi 2: Sumber Daya Alam',
                materi3: 'Materi 3: Sumber Daya Manusia',
                materi4: 'Materi 4: Peran Lembaga Sosial',
                materi5: 'Materi 5: Kondisi Geografis dan Interaksi',
                evaluasi: 'Evaluasi Pembelajaran',
                refleksi: 'Refleksi Pembelajaran'
            };
            return names[materialId] || materialId;
        }

        // Update progress display
        function updateProgressDisplay() {
            const materials = studentProgress.materials;
            let completed = 0;
            const total = Object.keys(materials).length;

            // Update table and indicators
            Object.keys(materials).forEach(materialId => {
                const material = materials[materialId];
                const statusElement = document.getElementById(`status-${materialId}`);
                const timeElement = document.getElementById(`time-${materialId}`);
                const scoreElement = document.getElementById(`score-${materialId}`);
                const indicator = document.getElementById(`progress-${materialId}`);

                if (material.completed) {
                    completed++;
                    if (statusElement) {
                        statusElement.textContent = 'Selesai';
                        statusElement.className = 'px-2 py-1 text-xs rounded-full bg-green-100 text-green-800';
                    }
                    if (timeElement) {
                        timeElement.textContent = material.completedAt || '-';
                        timeElement.className = 'px-4 py-3 text-center text-sm text-green-600';
                    }
                    if (scoreElement && material.score) {
                        scoreElement.textContent = material.score;
                        scoreElement.className = 'px-4 py-3 text-center text-sm text-green-600';
                    }
                    if (indicator) {
                        indicator.classList.remove('border-gray-300');
                        indicator.classList.add('border-green-500', 'bg-green-500');
                        indicator.querySelector('svg').classList.remove('hidden');
                    }
                }
            });

            // Update summary
            const percentage = Math.round((completed / total) * 100);
            document.getElementById('completedCount').textContent = `${completed}/${total}`;
            document.getElementById('completionPercentage').textContent = `${percentage}%`;
            document.getElementById('progressBar').style.width = `${percentage}%`;

            // Update learning status
            updateLearningStatus(completed, total);
        }

        // Update learning status
        function updateLearningStatus(completed, total) {
            const statusContainer = document.getElementById('learningStatus');
            let statusHTML = '';

            if (completed === 0) {
                statusHTML = `
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-gray-300 rounded-full mr-3"></div>
                        <span class="text-sm">Belum memulai pembelajaran</span>
                    </div>
                `;
            } else if (completed < total) {
                statusHTML = `
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-yellow-400 rounded-full mr-3"></div>
                        <span class="text-sm">Sedang dalam proses pembelajaran</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-green-400 rounded-full mr-3"></div>
                        <span class="text-sm">${completed} materi telah diselesaikan</span>
                    </div>
                `;
            } else {
                statusHTML = `
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
                        <span class="text-sm">Semua materi telah diselesaikan!</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
                        <span class="text-sm">Siap untuk evaluasi akhir</span>
                    </div>
                `;
            }

            statusContainer.innerHTML = statusHTML;
        }

        // Record quiz result for comprehensive tracking
        function recordQuizResult(quizId, quizData) {
            if (!studentProgress.studentInfo.nis) return;

            try {
                let comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                const studentRecord = comprehensiveDB.find(record => record.studentInfo.nis === studentProgress.studentInfo.nis);
                
                if (studentRecord) {
                    // Save quiz result
                    studentRecord.quizResults[quizId] = quizData;
                    
                    // Record as learning activity
                    studentRecord.learningActivities.push({
                        type: 'quiz_completion',
                        materialId: quizId,
                        materialName: getMaterialName(quizId),
                        timestamp: quizData.timestamp,
                        details: {
                            score: quizData.score,
                            total: quizData.total,
                            percentage: quizData.percentage,
                            grade: quizData.grade
                        }
                    });
                    
                    // Update last activity
                    studentRecord.lastUpdated = quizData.timestamp;
                    studentRecord.studentInfo.lastActivity = quizData.timestamp;
                    
                    // Save back to database
                    localStorage.setItem('comprehensiveStudentDB', JSON.stringify(comprehensiveDB));
                    
                    console.log('Quiz result recorded:', quizData);
                }
            } catch (error) {
                console.error('Error recording quiz result:', error);
            }
        }

        // Get quiz answers for tracking
        function getQuizAnswers(quiz) {
            const answers = [];
            const questions = quiz.querySelectorAll('.quiz-question');
            
            questions.forEach((question, index) => {
                const selectedOption = question.querySelector('.quiz-option.selected');
                const correctOption = question.querySelector('.quiz-option[data-correct="true"]');
                
                answers.push({
                    questionNumber: index + 1,
                    selectedAnswer: selectedOption ? selectedOption.textContent.trim() : 'Tidak dijawab',
                    correctAnswer: correctOption ? correctOption.textContent.trim() : '',
                    isCorrect: selectedOption && selectedOption.getAttribute('data-correct') === 'true'
                });
            });
            
            return answers;
        }

        // Update comprehensive record
        function updateComprehensiveRecord() {
            if (!studentProgress.studentInfo.nis) return;

            try {
                let comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                const studentRecord = comprehensiveDB.find(record => record.studentInfo.nis === studentProgress.studentInfo.nis);
                
                if (studentRecord) {
                    // Update overall progress
                    studentRecord.overallProgress = calculateCompletionPercentage();
                    
                    // Update last activity
                    studentRecord.lastUpdated = new Date().toISOString();
                    studentRecord.studentInfo.lastActivity = new Date().toISOString();
                    
                    // Save back to database
                    localStorage.setItem('comprehensiveStudentDB', JSON.stringify(comprehensiveDB));
                }
            } catch (error) {
                console.error('Error updating comprehensive record:', error);
            }
        }

        // Save reflection with comprehensive tracking
        function saveReflection() {
            const reflections = document.querySelectorAll('#refleksi textarea');
            let allFilled = true;
            const reflectionData = {};
            
            reflections.forEach((textarea, index) => {
                const value = textarea.value.trim();
                if (!value) {
                    allFilled = false;
                } else {
                    reflectionData[`question_${index + 1}`] = {
                        question: textarea.previousElementSibling.textContent,
                        answer: value,
                        timestamp: new Date().toISOString()
                    };
                }
            });

            if (!allFilled) {
                alert('Mohon lengkapi semua bagian refleksi!');
                return;
            }

            if (!studentProgress.studentInfo.nis) {
                alert('Mohon isi data siswa terlebih dahulu!');
                return;
            }

            // Save reflection to comprehensive database
            recordReflectionAnswers(reflectionData);
            
            // Save reflection to database
            saveReflectionToDatabase(reflectionData);

            // Record live activity for real-time display
            recordLiveActivity('reflection_completion', {
                materialId: 'refleksi',
                materialName: 'Refleksi Pembelajaran',
                totalQuestions: Object.keys(reflectionData).length
            });
            
            // Auto-sync to cloud if connected
            autoSaveToCloud();
            
            const cloudMessage = isCloudConnected ? '\n\n‚òÅÔ∏è Refleksi tersinkron ke cloud - guru dapat melihat dari device manapun!' : '';
            alert('‚úÖ Refleksi Anda telah tersimpan ke database komprehensif!\n\nüî¥ LIVE: Aktivitas refleksi Anda terlihat di dashboard real-time!\nüìä Semua jawaban refleksi tercatat untuk analisis pembelajaran\nüéì Terima kasih telah mengikuti pembelajaran IPS ini dengan baik.' + cloudMessage);
        }

        // Record reflection answers for comprehensive tracking
        function recordReflectionAnswers(reflectionData) {
            if (!studentProgress.studentInfo.nis) return;

            try {
                let comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                const studentRecord = comprehensiveDB.find(record => record.studentInfo.nis === studentProgress.studentInfo.nis);
                
                if (studentRecord) {
                    // Save reflection answers
                    studentRecord.reflectionAnswers = reflectionData;
                    
                    // Record as learning activity
                    studentRecord.learningActivities.push({
                        type: 'reflection_completion',
                        materialId: 'refleksi',
                        materialName: 'Refleksi Pembelajaran',
                        timestamp: new Date().toISOString(),
                        details: {
                            totalQuestions: Object.keys(reflectionData).length,
                            completedAt: new Date().toLocaleString('id-ID')
                        }
                    });
                    
                    // Update last activity
                    studentRecord.lastUpdated = new Date().toISOString();
                    studentRecord.studentInfo.lastActivity = new Date().toISOString();
                    
                    // Save back to database
                    localStorage.setItem('comprehensiveStudentDB', JSON.stringify(comprehensiveDB));
                    
                    console.log('Reflection answers recorded:', reflectionData);
                }
            } catch (error) {
                console.error('Error recording reflection answers:', error);
            }
        }

        // Print report
        function printReport() {
            if (!studentProgress.studentInfo.name) {
                alert('Mohon isi data siswa terlebih dahulu!');
                return;
            }
            window.print();
        }

        // Export to CSV
        function exportToCSV() {
            if (!studentProgress.studentInfo.name) {
                alert('Mohon isi data siswa terlebih dahulu!');
                return;
            }

            const info = studentProgress.studentInfo;
            const materials = studentProgress.materials;
            
            let csv = 'Nama,Kelas,NIS,Materi,Status,Waktu Selesai,Nilai\n';
            
            Object.keys(materials).forEach(materialId => {
                const material = materials[materialId];
                const materialName = getMaterialName(materialId);
                const status = material.completed ? 'Selesai' : 'Belum Selesai';
                const time = material.completedAt || '-';
                const score = material.score || '-';
                
                csv += `"${info.name}","${info.class}","${info.nis}","${materialName}","${status}","${time}","${score}"\n`;
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Laporan_Progress_${info.name.replace(/\s+/g, '_')}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        // Reset progress
        function resetProgress() {
            if (confirm('Apakah Anda yakin ingin mereset semua progress? Data yang sudah ada akan hilang.')) {
                localStorage.removeItem('studentProgress');
                location.reload();
            }
        }

        // Search student by NIS
        function searchStudentByNIS() {
            const nis = document.getElementById('searchNIS').value.trim();
            if (!nis) {
                alert('Mohon masukkan NIS yang akan dicari!');
                return;
            }

            try {
                const allStudents = JSON.parse(localStorage.getItem('allStudents') || '[]');
                const allProgress = JSON.parse(localStorage.getItem('allProgress') || '[]');
                
                const student = allStudents.find(s => s.nis === nis);
                
                if (student) {
                    const progress = allProgress.find(p => p.nis === nis);
                    displayStudentDetails(student, progress);
                } else {
                    alert('Siswa dengan NIS tersebut tidak ditemukan!');
                }
            } catch (error) {
                alert('Error saat mencari data siswa: ' + error.message);
            }
        }

        // Display student details
        function displayStudentDetails(student, progress) {
            const completionPercentage = progress ? progress.completionPercentage : 0;
            const lastUpdate = progress ? new Date(progress.timestamp).toLocaleString('id-ID') : 'Belum ada data';
            
            alert(`Detail Siswa:
Nama: ${student.name}
Kelas: ${student.class}
NIS: ${student.nis}
Progress: ${completionPercentage}%
Terakhir Update: ${lastUpdate}`);
        }

        // View all students
        function viewAllStudents() {
            getAllStudentsFromDatabase()
                .then(students => {
                    displayAllStudentsTable(students);
                })
                .catch(error => {
                    alert('Error loading students: ' + error);
                });
        }

        // Display all students table
        function displayAllStudentsTable(students) {
            const tableContainer = document.getElementById('allStudentsTable');
            const tableBody = document.getElementById('allStudentsTableBody');
            
            if (students.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="6" class="px-4 py-2 text-center">Belum ada data siswa</td></tr>';
            } else {
                tableBody.innerHTML = students.map(student => {
                    const progress = student.progress;
                    const completionPercentage = progress ? progress.completionPercentage : 0;
                    const lastUpdate = progress ? new Date(progress.timestamp).toLocaleString('id-ID') : 'Belum ada data';
                    
                    return `
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 border">${student.nis}</td>
                            <td class="px-4 py-2 border">${student.name}</td>
                            <td class="px-4 py-2 border">${student.class}</td>
                            <td class="px-4 py-2 border text-center">
                                <div class="flex items-center justify-center">
                                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: ${completionPercentage}%"></div>
                                    </div>
                                    <span class="text-sm">${completionPercentage}%</span>
                                </div>
                            </td>
                            <td class="px-4 py-2 border text-center text-sm">${lastUpdate}</td>
                            <td class="px-4 py-2 border text-center">
                                <button onclick="loadStudentData('${student.nis}')" class="bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600">
                                    Load
                                </button>
                            </td>
                        </tr>
                    `;
                }).join('');
            }
            
            tableContainer.classList.remove('hidden');
        }

        // Filter students by class
        function filterStudentsByClass() {
            const selectedClass = document.getElementById('filterClass').value;
            
            getAllStudentsFromDatabase()
                .then(students => {
                    let filteredStudents = students;
                    if (selectedClass) {
                        filteredStudents = students.filter(student => student.class === selectedClass);
                    }
                    displayAllStudentsTable(filteredStudents);
                })
                .catch(error => {
                    alert('Error filtering students: ' + error);
                });
        }

        // Load student data
        function loadStudentData(nis) {
            if (confirm('Apakah Anda ingin memuat data siswa ini ke sesi saat ini?')) {
                try {
                    const allStudents = JSON.parse(localStorage.getItem('allStudents') || '[]');
                    const allProgress = JSON.parse(localStorage.getItem('allProgress') || '[]');
                    
                    const student = allStudents.find(s => s.nis === nis);
                    const progress = allProgress.find(p => p.nis === nis);
                    
                    if (student) {
                        // Load student info
                        studentProgress.studentInfo = {
                            name: student.name,
                            class: student.class,
                            nis: student.nis
                        };
                        
                        // Load progress if available
                        if (progress) {
                            studentProgress.materials = progress.materials;
                        }
                        
                        // Update form fields
                        document.getElementById('studentName').value = student.name;
                        document.getElementById('studentClass').value = student.class;
                        document.getElementById('studentNIS').value = student.nis;
                        
                        updateProgressDisplay();
                        updateStudentInfoDisplay();
                        saveProgress();
                        
                        alert('Data siswa berhasil dimuat! Silakan cek halaman Beranda.');
                    } else {
                        alert('Data siswa tidak ditemukan!');
                    }
                } catch (error) {
                    alert('Error loading student data: ' + error.message);
                }
            }
        }

        // Add demo data for testing
        function addDemoData() {
            if (confirm('Apakah Anda ingin menambahkan data demo untuk testing? Data ini akan ditambahkan ke database.')) {
                const demoStudents = [
                    { nis: '12345', name: 'Ahmad Rizki', class: '8A' },
                    { nis: '12346', name: 'Siti Nurhaliza', class: '8A' },
                    { nis: '12347', name: 'Budi Santoso', class: '8B' },
                    { nis: '12348', name: 'Dewi Sartika', class: '8B' },
                    { nis: '12349', name: 'Eko Prasetyo', class: '8C' }
                ];
                
                const demoProgress = [
                    {
                        nis: '12345',
                        materials: {
                            materi1: { completed: true, completedAt: '2025-01-15 10:30:00', score: '4/4 (100%)' },
                            materi2: { completed: true, completedAt: '2025-01-15 11:00:00', score: null },
                            materi3: { completed: false, completedAt: null, score: null },
                            materi4: { completed: false, completedAt: null, score: null },
                            materi5: { completed: false, completedAt: null, score: null },
                            evaluasi: { completed: false, completedAt: null, score: null },
                            refleksi: { completed: false, completedAt: null, score: null }
                        },
                        timestamp: '2025-01-15T11:00:00.000Z',
                        completionPercentage: 29
                    },
                    {
                        nis: '12346',
                        materials: {
                            materi1: { completed: true, completedAt: '2025-01-15 09:15:00', score: '3/4 (75%)' },
                            materi2: { completed: true, completedAt: '2025-01-15 09:45:00', score: null },
                            materi3: { completed: true, completedAt: '2025-01-15 10:15:00', score: null },
                            materi4: { completed: true, completedAt: '2025-01-15 10:45:00', score: null },
                            materi5: { completed: false, completedAt: null, score: null },
                            evaluasi: { completed: false, completedAt: null, score: null },
                            refleksi: { completed: false, completedAt: null, score: null }
                        },
                        timestamp: '2025-01-15T10:45:00.000Z',
                        completionPercentage: 57
                    }
                ];
                
                // Save demo students
                let allStudents = JSON.parse(localStorage.getItem('allStudents') || '[]');
                demoStudents.forEach(student => {
                    const existingIndex = allStudents.findIndex(s => s.nis === student.nis);
                    const studentRecord = {
                        ...student,
                        createdAt: new Date().toISOString(),
                        lastUpdated: new Date().toISOString()
                    };
                    
                    if (existingIndex !== -1) {
                        allStudents[existingIndex] = studentRecord;
                    } else {
                        allStudents.push(studentRecord);
                    }
                });
                localStorage.setItem('allStudents', JSON.stringify(allStudents));
                
                // Save demo progress
                let allProgress = JSON.parse(localStorage.getItem('allProgress') || '[]');
                demoProgress.forEach(progress => {
                    const existingIndex = allProgress.findIndex(p => p.nis === progress.nis);
                    if (existingIndex !== -1) {
                        allProgress[existingIndex] = progress;
                    } else {
                        allProgress.push(progress);
                    }
                });
                localStorage.setItem('allProgress', JSON.stringify(allProgress));
                
                alert('Data demo berhasil ditambahkan! Klik "Lihat Semua Data Siswa" untuk melihat hasilnya.');
            }
        }

        // Test save function for debugging
        function testSaveFunction() {
            console.log('=== TESTING SAVE FUNCTION ===');
            
            // Test data
            const testData = {
                name: 'Test Student',
                class: 'VIII A',
                nis: '99999'
            };
            
            console.log('Test data:', testData);
            
            try {
                // Test localStorage
                localStorage.setItem('test', JSON.stringify(testData));
                const retrieved = JSON.parse(localStorage.getItem('test'));
                console.log('localStorage test successful:', retrieved);
                localStorage.removeItem('test');
                
                // Test current form values
                const name = document.getElementById('studentName').value;
                const studentClass = document.getElementById('studentClass').value;
                const nis = document.getElementById('studentNIS').value;
                
                console.log('Current form values:', { name, studentClass, nis });
                
                // Test studentProgress object
                console.log('Current studentProgress:', studentProgress);
                
                alert('‚úÖ Test berhasil! Cek console untuk detail.');
                
            } catch (error) {
                console.error('Test error:', error);
                alert('‚ùå Test gagal: ' + error.message);
            }
        }

        // Check stored data
        function checkStoredData() {
            console.log('=== CHECKING STORED DATA ===');
            
            try {
                const progress = localStorage.getItem('studentProgress');
                const allStudents = localStorage.getItem('allStudents');
                const allProgress = localStorage.getItem('allProgress');
                
                console.log('studentProgress:', progress ? JSON.parse(progress) : 'Not found');
                console.log('allStudents:', allStudents ? JSON.parse(allStudents) : 'Not found');
                console.log('allProgress:', allProgress ? JSON.parse(allProgress) : 'Not found');
                
                let message = 'üìä Data Tersimpan:\n\n';
                
                if (progress) {
                    const p = JSON.parse(progress);
                    message += `‚úÖ Progress Sesi: ${p.studentInfo.name || 'Kosong'}\n`;
                } else {
                    message += '‚ùå Progress Sesi: Tidak ada\n';
                }
                
                if (allStudents) {
                    const students = JSON.parse(allStudents);
                    message += `‚úÖ Database Siswa: ${students.length} siswa\n`;
                } else {
                    message += '‚ùå Database Siswa: Kosong\n';
                }
                
                if (allProgress) {
                    const progresses = JSON.parse(allProgress);
                    message += `‚úÖ Database Progress: ${progresses.length} record\n`;
                } else {
                    message += '‚ùå Database Progress: Kosong\n';
                }
                
                alert(message);
                
            } catch (error) {
                console.error('Error checking data:', error);
                alert('‚ùå Error: ' + error.message);
            }
        }

        // Get comprehensive database statistics
        function getComprehensiveStatistics() {
            try {
                const comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                
                const stats = {
                    totalStudents: comprehensiveDB.length,
                    activeStudents: 0,
                    totalActivities: 0,
                    averageProgress: 0,
                    completedMaterials: 0,
                    completedQuizzes: 0,
                    averageScore: 0,
                    totalStudyTime: 0
                };
                
                let totalProgress = 0;
                let totalScores = 0;
                let scoreCount = 0;
                
                comprehensiveDB.forEach(student => {
                    // Count active students (those with recent activity)
                    const lastActivity = new Date(student.lastUpdated);
                    const daysSinceActivity = (new Date() - lastActivity) / (1000 * 60 * 60 * 24);
                    if (daysSinceActivity <= 7) stats.activeStudents++;
                    
                    // Count total activities
                    stats.totalActivities += student.learningActivities.length;
                    
                    // Calculate progress
                    totalProgress += student.overallProgress;
                    
                    // Count completed materials and quizzes
                    student.learningActivities.forEach(activity => {
                        if (activity.type === 'material_completion') {
                            stats.completedMaterials++;
                            stats.totalStudyTime += activity.details.sessionDuration || 0;
                        } else if (activity.type === 'quiz_completion') {
                            stats.completedQuizzes++;
                            totalScores += activity.details.percentage;
                            scoreCount++;
                        }
                    });
                });
                
                // Calculate averages
                if (comprehensiveDB.length > 0) {
                    stats.averageProgress = Math.round(totalProgress / comprehensiveDB.length);
                }
                if (scoreCount > 0) {
                    stats.averageScore = Math.round(totalScores / scoreCount);
                }
                
                return stats;
            } catch (error) {
                console.error('Error getting comprehensive statistics:', error);
                return {
                    totalStudents: 0,
                    activeStudents: 0,
                    totalActivities: 0,
                    averageProgress: 0,
                    completedMaterials: 0,
                    completedQuizzes: 0,
                    averageScore: 0,
                    totalStudyTime: 0
                };
            }
        }

        // Update comprehensive statistics display
        function updateComprehensiveStatistics() {
            const stats = getComprehensiveStatistics();
            
            // Update main statistics
            document.getElementById('totalStudentsCount').textContent = stats.totalStudents;
            document.getElementById('activeStudentsCount').textContent = stats.activeStudents;
            document.getElementById('averageProgress').textContent = stats.averageProgress + '%';
            document.getElementById('totalActivitiesCount').textContent = stats.totalActivities;
            
            // Update detailed statistics
            document.getElementById('completedMaterials').textContent = stats.completedMaterials;
            document.getElementById('completedQuizzes').textContent = stats.completedQuizzes;
            document.getElementById('averageScore').textContent = stats.averageScore + '%';
            document.getElementById('totalStudyTime').textContent = stats.totalStudyTime + ' menit';
            
            // Update current student activities count
            if (studentProgress.studentInfo.nis) {
                const comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                const currentStudent = comprehensiveDB.find(s => s.studentInfo.nis === studentProgress.studentInfo.nis);
                if (currentStudent) {
                    document.getElementById('displayActivities').textContent = currentStudent.learningActivities.length;
                }
            }
        }

        // View all students comprehensive
        function viewAllStudentsComprehensive() {
            try {
                const comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                displayComprehensiveStudentsTable(comprehensiveDB);
                updateComprehensiveStatistics();
            } catch (error) {
                alert('Error loading comprehensive data: ' + error.message);
            }
        }

        // Display comprehensive students table
        function displayComprehensiveStudentsTable(students) {
            const tableContainer = document.getElementById('allStudentsTable');
            const tableBody = document.getElementById('allStudentsTableBody');
            
            if (students.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="7" class="px-4 py-2 text-center">Belum ada data siswa komprehensif</td></tr>';
            } else {
                tableBody.innerHTML = students.map(student => {
                    const info = student.studentInfo;
                    const progress = student.overallProgress;
                    const lastUpdate = new Date(student.lastUpdated).toLocaleString('id-ID');
                    const totalActivities = student.learningActivities.length;
                    const quizCount = student.learningActivities.filter(a => a.type === 'quiz_completion').length;
                    
                    return `
                        <tr class="hover:bg-gray-50">
                            <td class="px-4 py-2 border">${info.nis}</td>
                            <td class="px-4 py-2 border">${info.name}</td>
                            <td class="px-4 py-2 border">${info.class}</td>
                            <td class="px-4 py-2 border text-center">
                                <div class="flex items-center justify-center">
                                    <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: ${progress}%"></div>
                                    </div>
                                    <span class="text-sm">${progress}%</span>
                                </div>
                            </td>
                            <td class="px-4 py-2 border text-center text-sm">${lastUpdate}</td>
                            <td class="px-4 py-2 border text-center">
                                <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">${totalActivities} aktivitas</span>
                                <br>
                                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">${quizCount} quiz</span>
                            </td>
                            <td class="px-4 py-2 border text-center">
                                <button onclick="loadStudentData('${info.nis}')" class="bg-blue-500 text-white px-2 py-1 rounded text-xs hover:bg-blue-600 mr-1">
                                    Load
                                </button>
                                <button onclick="viewStudentDetails('${info.nis}')" class="bg-green-500 text-white px-2 py-1 rounded text-xs hover:bg-green-600">
                                    Detail
                                </button>
                            </td>
                        </tr>
                    `;
                }).join('');
            }
            
            tableContainer.classList.remove('hidden');
        }

        // View student details
        function viewStudentDetails(nis) {
            try {
                const comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                const student = comprehensiveDB.find(s => s.studentInfo.nis === nis);
                
                if (!student) {
                    alert('Data siswa tidak ditemukan!');
                    return;
                }
                
                const info = student.studentInfo;
                const activities = student.learningActivities;
                const quizResults = student.quizResults;
                const reflections = student.reflectionAnswers;
                
                let detailMessage = `üìä DETAIL LENGKAP SISWA\n\n`;
                detailMessage += `üë§ Informasi Dasar:\n`;
                detailMessage += `‚Ä¢ Nama: ${info.name}\n`;
                detailMessage += `‚Ä¢ Kelas: ${info.class}\n`;
                detailMessage += `‚Ä¢ NIS: ${info.nis}\n`;
                detailMessage += `‚Ä¢ Progress: ${student.overallProgress}%\n`;
                detailMessage += `‚Ä¢ Total Aktivitas: ${activities.length}\n\n`;
                
                detailMessage += `üìö Aktivitas Pembelajaran:\n`;
                activities.slice(-5).forEach((activity, index) => {
                    const time = new Date(activity.timestamp).toLocaleString('id-ID');
                    detailMessage += `${index + 1}. ${activity.materialName} (${activity.type}) - ${time}\n`;
                });
                
                if (Object.keys(quizResults).length > 0) {
                    detailMessage += `\n‚úÖ Hasil Quiz:\n`;
                    Object.keys(quizResults).forEach(quizId => {
                        const quiz = quizResults[quizId];
                        detailMessage += `‚Ä¢ ${getMaterialName(quizId)}: ${quiz.score}/${quiz.total} (${quiz.percentage}%)\n`;
                    });
                }
                
                if (Object.keys(reflections).length > 0) {
                    detailMessage += `\nüí≠ Refleksi: ${Object.keys(reflections).length} jawaban tersimpan\n`;
                }
                
                alert(detailMessage);
                
            } catch (error) {
                alert('Error loading student details: ' + error.message);
            }
        }

        // Filter students by progress
        function filterStudentsByProgress() {
            const selectedRange = document.getElementById('filterProgress').value;
            
            try {
                const comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                let filteredStudents = comprehensiveDB;
                
                if (selectedRange) {
                    const [min, max] = selectedRange.split('-').map(Number);
                    filteredStudents = comprehensiveDB.filter(student => {
                        const progress = student.overallProgress;
                        return progress >= min && progress <= max;
                    });
                }
                
                displayComprehensiveStudentsTable(filteredStudents);
            } catch (error) {
                alert('Error filtering students: ' + error.message);
            }
        }

        // View detailed analytics
        function viewDetailedAnalytics() {
            try {
                const stats = getComprehensiveStatistics();
                const comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                
                let analyticsMessage = `üìà ANALISIS PEMBELAJARAN DETAIL\n\n`;
                analyticsMessage += `üìä Statistik Umum:\n`;
                analyticsMessage += `‚Ä¢ Total Siswa: ${stats.totalStudents}\n`;
                analyticsMessage += `‚Ä¢ Siswa Aktif (7 hari terakhir): ${stats.activeStudents}\n`;
                analyticsMessage += `‚Ä¢ Rata-rata Progress: ${stats.averageProgress}%\n`;
                analyticsMessage += `‚Ä¢ Total Aktivitas: ${stats.totalActivities}\n\n`;
                
                analyticsMessage += `üéØ Performa Pembelajaran:\n`;
                analyticsMessage += `‚Ä¢ Materi Diselesaikan: ${stats.completedMaterials}\n`;
                analyticsMessage += `‚Ä¢ Quiz Dikerjakan: ${stats.completedQuizzes}\n`;
                analyticsMessage += `‚Ä¢ Rata-rata Nilai Quiz: ${stats.averageScore}%\n`;
                analyticsMessage += `‚Ä¢ Total Waktu Belajar: ${stats.totalStudyTime} menit\n\n`;
                
                // Class distribution
                const classDistribution = {};
                comprehensiveDB.forEach(student => {
                    const className = student.studentInfo.class;
                    classDistribution[className] = (classDistribution[className] || 0) + 1;
                });
                
                analyticsMessage += `üè´ Distribusi Kelas:\n`;
                Object.keys(classDistribution).forEach(className => {
                    analyticsMessage += `‚Ä¢ ${className}: ${classDistribution[className]} siswa\n`;
                });
                
                alert(analyticsMessage);
                
            } catch (error) {
                alert('Error generating analytics: ' + error.message);
            }
        }

        // Add comprehensive demo data
        function addComprehensiveDemoData() {
            if (confirm('Apakah Anda ingin menambahkan data demo komprehensif? Data ini akan menunjukkan contoh tracking lengkap.')) {
                try {
                    const demoData = [
                        {
                            studentInfo: {
                                nis: '12345',
                                name: 'Ahmad Rizki Pratama',
                                class: '8A',
                                registeredAt: '2025-01-10T08:00:00.000Z',
                                lastActivity: '2025-01-15T14:30:00.000Z'
                            },
                            learningActivities: [
                                {
                                    type: 'material_completion',
                                    materialId: 'materi1',
                                    materialName: 'Karakteristik Geografis',
                                    timestamp: '2025-01-10T09:00:00.000Z',
                                    details: { completedAt: '10/01/2025 09:00:00', sessionDuration: 25 }
                                },
                                {
                                    type: 'quiz_completion',
                                    materialId: 'materi1',
                                    materialName: 'Karakteristik Geografis',
                                    timestamp: '2025-01-10T09:30:00.000Z',
                                    details: { score: 4, total: 4, percentage: 100, grade: 'Sangat Baik' }
                                },
                                {
                                    type: 'material_completion',
                                    materialId: 'materi2',
                                    materialName: 'Sumber Daya Alam',
                                    timestamp: '2025-01-12T10:00:00.000Z',
                                    details: { completedAt: '12/01/2025 10:00:00', sessionDuration: 30 }
                                }
                            ],
                            quizResults: {
                                materi1: {
                                    score: 4, total: 4, percentage: 100, grade: 'Sangat Baik',
                                    answers: [
                                        { questionNumber: 1, selectedAnswer: 'B. Asia dan Australia', correctAnswer: 'B. Asia dan Australia', isCorrect: true }
                                    ],
                                    timestamp: '2025-01-10T09:30:00.000Z',
                                    completedAt: '10/01/2025 09:30:00'
                                }
                            },
                            reflectionAnswers: {},
                            timeSpent: { materi1: 25, materi2: 30 },
                            completionTimestamps: {
                                materi1: '2025-01-10T09:00:00.000Z',
                                materi2: '2025-01-12T10:00:00.000Z'
                            },
                            overallProgress: 29,
                            createdAt: '2025-01-10T08:00:00.000Z',
                            lastUpdated: '2025-01-15T14:30:00.000Z'
                        },
                        {
                            studentInfo: {
                                nis: '12346',
                                name: 'Siti Nurhaliza',
                                class: '8A',
                                registeredAt: '2025-01-11T08:00:00.000Z',
                                lastActivity: '2025-01-15T16:00:00.000Z'
                            },
                            learningActivities: [
                                {
                                    type: 'material_completion',
                                    materialId: 'materi1',
                                    materialName: 'Karakteristik Geografis',
                                    timestamp: '2025-01-11T09:00:00.000Z',
                                    details: { completedAt: '11/01/2025 09:00:00', sessionDuration: 20 }
                                },
                                {
                                    type: 'quiz_completion',
                                    materialId: 'materi1',
                                    materialName: 'Karakteristik Geografis',
                                    timestamp: '2025-01-11T09:25:00.000Z',
                                    details: { score: 3, total: 4, percentage: 75, grade: 'Baik' }
                                },
                                {
                                    type: 'material_completion',
                                    materialId: 'materi2',
                                    materialName: 'Sumber Daya Alam',
                                    timestamp: '2025-01-13T10:00:00.000Z',
                                    details: { completedAt: '13/01/2025 10:00:00', sessionDuration: 35 }
                                },
                                {
                                    type: 'material_completion',
                                    materialId: 'materi3',
                                    materialName: 'Sumber Daya Manusia',
                                    timestamp: '2025-01-14T11:00:00.000Z',
                                    details: { completedAt: '14/01/2025 11:00:00', sessionDuration: 28 }
                                },
                                {
                                    type: 'reflection_completion',
                                    materialId: 'refleksi',
                                    materialName: 'Refleksi Pembelajaran',
                                    timestamp: '2025-01-15T16:00:00.000Z',
                                    details: { totalQuestions: 6, completedAt: '15/01/2025 16:00:00' }
                                }
                            ],
                            quizResults: {
                                materi1: {
                                    score: 3, total: 4, percentage: 75, grade: 'Baik',
                                    answers: [
                                        { questionNumber: 1, selectedAnswer: 'B. Asia dan Australia', correctAnswer: 'B. Asia dan Australia', isCorrect: true }
                                    ],
                                    timestamp: '2025-01-11T09:25:00.000Z',
                                    completedAt: '11/01/2025 09:25:00'
                                }
                            },
                            reflectionAnswers: {
                                question_1: {
                                    question: '1. Apa yang paling menarik dari materi yang telah dipelajari?',
                                    answer: 'Saya tertarik dengan keragaman alam Indonesia yang sangat kaya dan beragam.',
                                    timestamp: '2025-01-15T16:00:00.000Z'
                                }
                            },
                            timeSpent: { materi1: 20, materi2: 35, materi3: 28 },
                            completionTimestamps: {
                                materi1: '2025-01-11T09:00:00.000Z',
                                materi2: '2025-01-13T10:00:00.000Z',
                                materi3: '2025-01-14T11:00:00.000Z',
                                refleksi: '2025-01-15T16:00:00.000Z'
                            },
                            overallProgress: 57,
                            createdAt: '2025-01-11T08:00:00.000Z',
                            lastUpdated: '2025-01-15T16:00:00.000Z'
                        }
                    ];
                    
                    // Save demo data
                    let comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                    
                    demoData.forEach(demo => {
                        // Remove existing record if any
                        comprehensiveDB = comprehensiveDB.filter(record => record.studentInfo.nis !== demo.studentInfo.nis);
                        // Add demo record
                        comprehensiveDB.push(demo);
                    });
                    
                    localStorage.setItem('comprehensiveStudentDB', JSON.stringify(comprehensiveDB));
                    
                    alert('‚úÖ Data demo komprehensif berhasil ditambahkan!\n\nüìä Data mencakup:\n‚Ä¢ 2 siswa dengan aktivitas lengkap\n‚Ä¢ Hasil quiz dan refleksi\n‚Ä¢ Tracking waktu belajar\n‚Ä¢ Timeline aktivitas detail\n\nKlik "Lihat Semua Data Komprehensif" untuk melihat hasilnya.');
                    
                } catch (error) {
                    alert('Error adding demo data: ' + error.message);
                }
            }
        }

        // Export comprehensive report
        function exportComprehensiveReport() {
            try {
                const comprehensiveDB = JSON.parse(localStorage.getItem('comprehensiveStudentDB') || '[]');
                
                if (comprehensiveDB.length === 0) {
                    alert('Tidak ada data komprehensif untuk diekspor!');
                    return;
                }

                let csv = 'NIS,Nama,Kelas,Progress (%),Total Aktivitas,Quiz Dikerjakan,Rata-rata Nilai,Waktu Belajar (menit),Refleksi Selesai,Terakhir Aktif,Materi 1,Materi 2,Materi 3,Materi 4,Materi 5,Evaluasi,Refleksi\n';
                
                comprehensiveDB.forEach(student => {
                    const info = student.studentInfo;
                    const activities = student.learningActivities;
                    const quizResults = student.quizResults;
                    const reflections = student.reflectionAnswers;
                    
                    // Calculate statistics
                    const totalActivities = activities.length;
                    const quizCount = activities.filter(a => a.type === 'quiz_completion').length;
                    const totalStudyTime = activities
                        .filter(a => a.type === 'material_completion')
                        .reduce((sum, a) => sum + (a.details.sessionDuration || 0), 0);
                    
                    const quizScores = Object.values(quizResults).map(q => q.percentage);
                    const averageScore = quizScores.length > 0 ? Math.round(quizScores.reduce((a, b) => a + b, 0) / quizScores.length) : 0;
                    
                    const reflectionComplete = Object.keys(reflections).length > 0 ? 'Ya' : 'Tidak';
                    const lastActive = new Date(student.lastUpdated).toLocaleString('id-ID');
                    
                    // Material completion status
                    const materialStatus = [
                        student.completionTimestamps.materi1 ? 'Selesai' : 'Belum',
                        student.completionTimestamps.materi2 ? 'Selesai' : 'Belum',
                        student.completionTimestamps.materi3 ? 'Selesai' : 'Belum',
                        student.completionTimestamps.materi4 ? 'Selesai' : 'Belum',
                        student.completionTimestamps.materi5 ? 'Selesai' : 'Belum',
                        student.completionTimestamps.evaluasi ? 'Selesai' : 'Belum',
                        student.completionTimestamps.refleksi ? 'Selesai' : 'Belum'
                    ].join(',');
                    
                    csv += `"${info.nis}","${info.name}","${info.class}","${student.overallProgress}%","${totalActivities}","${quizCount}","${averageScore}%","${totalStudyTime}","${reflectionComplete}","${lastActive}",${materialStatus}\n`;
                });

                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Laporan_Komprehensif_${new Date().toISOString().split('T')[0]}.csv`;
                a.click();
                window.URL.revokeObjectURL(url);
                
                alert('‚úÖ Laporan komprehensif berhasil diekspor!\n\nüìä File CSV mencakup:\n‚Ä¢ Data siswa lengkap\n‚Ä¢ Statistik aktivitas\n‚Ä¢ Hasil quiz dan nilai\n‚Ä¢ Waktu belajar\n‚Ä¢ Status penyelesaian materi');
                
            } catch (error) {
                alert('Error exporting comprehensive report: ' + error.message);
            }
        }

        // Export all students to CSV (legacy function - updated)
        function exportAllStudentsToCSV() {
            exportComprehensiveReport();
        }

        // Detect device type
        function getDeviceType() {
            const userAgent = navigator.userAgent;
            if (/tablet|ipad|playbook|silk/i.test(userAgent)) {
                return 'Tablet';
            }
            if (/mobile|iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(userAgent)) {
                return 'HP/Mobile';
            }
            return 'Komputer/Desktop';
        }

        // View active devices
        function viewActiveDevices() {
            if (!isCloudConnected) {
                alert('Cloud database belum terhubung. Aktifkan cloud database terlebih dahulu.');
                return;
            }
            
            try {
                const sharedStorageKey = 'SHARED_CLOUD_DATABASE_IPS_SMPN2_SUKABUMI';
                const cloudData = JSON.parse(localStorage.getItem(sharedStorageKey) || '{}');
                const devices = cloudData.devices || {};
                
                if (Object.keys(devices).length === 0) {
                    alert('üì± Belum ada device yang terdaftar di cloud database.');
                    return;
                }
                
                let deviceList = 'üì± DEVICE AKTIF TERHUBUNG KE DATABASE:\n\n';
                let activeCount = 0;
                const fiveMinutesAgo = new Date(Date.now() - 5 * 60 * 1000);
                
                Object.entries(devices).forEach(([deviceId, device], index) => {
                    const lastSeen = new Date(device.lastSeen);
                    const isActive = lastSeen > fiveMinutesAgo;
                    const status = isActive ? 'üü¢ AKTIF' : 'üî¥ OFFLINE';
                    
                    if (isActive) activeCount++;
                    
                    deviceList += `${index + 1}. ${device.deviceType} ${status}\n`;
                    deviceList += `   ‚Ä¢ Siswa: ${device.currentStudent}\n`;
                    deviceList += `   ‚Ä¢ Terakhir aktif: ${lastSeen.toLocaleString('id-ID')}\n`;
                    deviceList += `   ‚Ä¢ Device ID: ${deviceId.substring(0, 20)}...\n\n`;
                });
                
                deviceList += `üìä RINGKASAN:\n`;
                deviceList += `‚Ä¢ Total device terdaftar: ${Object.keys(devices).length}\n`;
                deviceList += `‚Ä¢ Device aktif (5 menit terakhir): ${activeCount}\n`;
                deviceList += `‚Ä¢ Database version: v${cloudData.version || 0}\n`;
                deviceList += `‚Ä¢ Update terakhir: ${new Date(cloudData.lastUpdate).toLocaleString('id-ID')}\n\n`;
                deviceList += `‚úÖ Semua device menggunakan DATABASE YANG SAMA!`;
                
                alert(deviceList);
                
            } catch (error) {
                alert('Error loading device information: ' + error.message);
            }
        }

        // Enhanced localStorage initialization for better multi-device support
        function initializeEnhancedLocalStorage() {
            console.log('Initializing enhanced localStorage for multi-device support');
            
            // Create a fallback shared storage system
            const fallbackKey = 'FALLBACK_SHARED_DATABASE_IPS';
            if (!localStorage.getItem(fallbackKey)) {
                const fallbackData = {
                    students: [],
                    progress: [],
                    comprehensive: [],
                    devices: {},
                    lastUpdate: new Date().toISOString(),
                    version: 1,
                    mode: 'fallback'
                };
                localStorage.setItem(fallbackKey, JSON.stringify(fallbackData));
            }
            
            isCloudConnected = true;
            updateCloudStatus('connected', 'Terhubung ke fallback database');
            
            alert('‚ö†Ô∏è Menggunakan mode fallback untuk multi-device.\n\nSistem akan tetap berusaha menyinkronkan data antar device menggunakan localStorage yang ditingkatkan.');
        }

        // Show multi-device welcome message with enhanced detection
        function showMultiDeviceWelcome() {
            const deviceType = getDeviceType();
            const sharedStorageKey = 'SHARED_CLOUD_DATABASE_IPS_SMPN2_SUKABUMI';
            const hasSharedData = localStorage.getItem(sharedStorageKey);
            
            if (hasSharedData) {
                try {
                    const cloudData = JSON.parse(hasSharedData);
                    const studentCount = cloudData.students?.length || 0;
                    const deviceCount = Object.keys(cloudData.devices || {}).length;
                    
                    if (studentCount > 0 || deviceCount > 0) {
                        setTimeout(() => {
                            if (confirm(`üì± Selamat datang di ${deviceType}!\n\n‚òÅÔ∏è Terdeteksi SHARED DATABASE dengan:\n‚Ä¢ ${studentCount} data siswa\n‚Ä¢ ${deviceCount} device terdaftar\n‚Ä¢ Database version: v${cloudData.version || 0}\n\nApakah Anda ingin terhubung ke database terpusat ini?\n\n‚úÖ Ya - Terhubung ke database terpusat\n‚ùå Tidak - Mulai database baru (tidak disarankan)`)) {
                                initCloudDatabase();
                            }
                        }, 2000);
                    }
                } catch (error) {
                    console.error('Error reading shared data:', error);
                }
            }
        }

        // ===== SHARING AND DEPLOYMENT FUNCTIONS =====

        // Download HTML file for sharing
        function downloadHTMLFile() {
            try {
                // Get the current HTML content
                const htmlContent = document.documentElement.outerHTML;
                
                // Create blob and download
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Media_Pembelajaran_IPS_SMPN2_Sukabumi.html';
                a.click();
                window.URL.revokeObjectURL(url);
                
                alert('‚úÖ File HTML berhasil didownload!\n\nüìÅ Cara share ke siswa:\n1. Copy file ke flashdisk/Google Drive\n2. Share via WhatsApp/email\n3. Siswa buka file di browser\n4. Semua fitur berfungsi offline!\n\nüí° File ini sudah include semua data dan bisa digunakan tanpa internet.');
                
            } catch (error) {
                alert('‚ùå Error downloading file: ' + error.message);
            }
        }

        // Generate QR Code for easy access
        function generateQRCode() {
            try {
                const currentURL = window.location.href;
                const qrContainer = document.getElementById('qrCodeContainer');
                const qrDisplay = document.getElementById('qrCodeDisplay');
                
                // Create QR code using a simple method (ASCII art style)
                const qrText = `
                ‚ñà‚ñà‚ñà‚ñà ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ ‚ñà‚ñÄ‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà ‚ñà   ‚ñà ‚ñà‚ñÄ‚ñÄ ‚ñà ‚ñà   ‚ñà ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñà ‚ñÄ‚ñÑ‚ñà ‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñà ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñÑ‚ñÄ ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà‚ñÑ‚ñÑ  ‚ñÑ‚ñÄ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà‚ñÑ‚ñÑ‚ñà‚ñÑ‚ñÄ‚ñÑ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ ‚ñà‚ñÑ‚ñÑ ‚ñÑ ‚ñÑ ‚ñÄ‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà ‚ñà   ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÄ‚ñÄ‚ñÄ‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñà ‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
                ‚ñà‚ñà‚ñà‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà‚ñà‚ñà
                `;
                
                qrDisplay.innerHTML = `
                    <div class="bg-white p-4 border-2 border-gray-300 rounded-lg inline-block">
                        <pre class="text-xs leading-none">${qrText}</pre>
                        <div class="mt-2 text-center">
                            <p class="text-xs font-mono bg-gray-100 p-1 rounded">${currentURL}</p>
                        </div>
                    </div>
                `;
                
                qrContainer.classList.remove('hidden');
                
                alert('üì≤ QR Code berhasil dibuat!\n\nüéØ Cara menggunakan:\n1. Tampilkan QR Code di proyektor/layar\n2. Siswa scan dengan kamera HP\n3. Otomatis terbuka di browser HP\n4. Langsung bisa mulai belajar!\n\nüí° QR Code berisi link ke media pembelajaran ini.');
                
            } catch (error) {
                alert('‚ùå Error generating QR code: ' + error.message);
            }
        }

        // Setup local server for lab network
        function setupLocalServer() {
            const instructions = `
üñ•Ô∏è PANDUAN SETUP LOCAL SERVER UNTUK LAB KOMPUTER

üìã PERSIAPAN:
1. Pastikan semua komputer terhubung ke jaringan yang sama
2. Install Python atau Node.js di komputer guru
3. Download file HTML media pembelajaran

üîß LANGKAH SETUP:

METODE 1 - Python (Recommended):
1. Buka Command Prompt as Administrator
2. Navigate ke folder file HTML
3. Ketik: python -m http.server 8000
4. Server akan jalan di port 8000

METODE 2 - Node.js:
1. Install: npm install -g http-server
2. Navigate ke folder file HTML  
3. Ketik: http-server -p 8000
4. Server akan jalan di port 8000

METODE 3 - XAMPP:
1. Copy file HTML ke folder htdocs
2. Start Apache di XAMPP
3. Akses via http://localhost/namafile.html

üì± AKSES DARI KOMPUTER SISWA:
‚Ä¢ Buka browser di komputer siswa
‚Ä¢ Ketik: http://[IP-GURU]:8000
‚Ä¢ Contoh: http://192.168.1.100:8000
‚Ä¢ Semua siswa bisa akses bersamaan!

üîç CARA CEK IP GURU:
‚Ä¢ Windows: ipconfig
‚Ä¢ Cari "IPv4 Address"
‚Ä¢ Contoh: 192.168.1.100

‚úÖ KEUNTUNGAN:
‚Ä¢ Semua data tersinkron real-time
‚Ä¢ Guru bisa monitor progress semua siswa
‚Ä¢ Tidak perlu internet
‚Ä¢ Kontrol penuh dari komputer guru

‚ö†Ô∏è TROUBLESHOOTING:
‚Ä¢ Pastikan Windows Firewall allow port 8000
‚Ä¢ Cek antivirus tidak block server
‚Ä¢ Pastikan semua komputer di network yang sama
            `;
            
            alert(instructions);
            
            // Try to detect current IP
            detectNetworkInfo();
        }

        // Deploy to cloud hosting
        function deployToCloud() {
            const instructions = `
‚òÅÔ∏è PANDUAN DEPLOY KE CLOUD HOSTING (GRATIS)

üéØ PILIHAN HOSTING GRATIS:

1Ô∏è‚É£ GITHUB PAGES (Paling Mudah):
‚Ä¢ Buat akun GitHub.com
‚Ä¢ Upload file HTML ke repository
‚Ä¢ Enable GitHub Pages di Settings
‚Ä¢ Akses via: username.github.io/repo-name

2Ô∏è‚É£ NETLIFY:
‚Ä¢ Daftar di netlify.com
‚Ä¢ Drag & drop file HTML
‚Ä¢ Otomatis dapat link: random-name.netlify.app
‚Ä¢ Custom domain gratis tersedia

3Ô∏è‚É£ VERCEL:
‚Ä¢ Daftar di vercel.com  
‚Ä¢ Connect dengan GitHub
‚Ä¢ Auto deploy setiap update
‚Ä¢ Akses via: project-name.vercel.app

4Ô∏è‚É£ FIREBASE HOSTING:
‚Ä¢ Daftar di firebase.google.com
‚Ä¢ Install Firebase CLI
‚Ä¢ firebase init hosting
‚Ä¢ firebase deploy

üì± KEUNTUNGAN CLOUD:
‚Ä¢ Akses dari mana saja (HP, tablet, komputer)
‚Ä¢ Link permanen untuk siswa
‚Ä¢ Tidak perlu setup server
‚Ä¢ Otomatis backup
‚Ä¢ SSL certificate gratis

üîó CARA SHARE KE SISWA:
‚Ä¢ Copy link hosting
‚Ä¢ Share via WhatsApp grup kelas
‚Ä¢ Buat QR Code untuk scan HP
‚Ä¢ Tulis di papan tulis

üí° REKOMENDASI:
Untuk guru pemula: Gunakan Netlify
Untuk yang familiar Git: GitHub Pages
Untuk fitur advanced: Vercel

‚ö†Ô∏è CATATAN:
‚Ä¢ Semua hosting di atas GRATIS
‚Ä¢ Tidak ada batas pengunjung
‚Ä¢ Data siswa tersimpan di browser masing-masing
‚Ä¢ Untuk data terpusat, perlu database cloud
            `;
            
            alert(instructions);
        }

        // Share via WhatsApp
        function shareViaWhatsApp() {
            const currentURL = window.location.href;
            const message = `üéì Media Pembelajaran IPS - SMP Negeri 2 Kota Sukabumi

üìö Materi Pembelajaran:
‚Ä¢ Karakteristik Geografis Indonesia
‚Ä¢ Sumber Daya Alam & Manusia
‚Ä¢ Peran Lembaga Sosial
‚Ä¢ Interaksi dengan Bangsa Asing

‚ú® Fitur:
‚Ä¢ Pembelajaran interaktif
‚Ä¢ Quiz dan evaluasi
‚Ä¢ Progress tracking
‚Ä¢ Refleksi pembelajaran

üîó Link: ${currentURL}

üì± Cara akses:
1. Klik link di atas
2. Buka di browser HP/komputer
3. Isi data siswa
4. Mulai belajar!

üë®‚Äçüè´ Guru: Engkus Kusnandar, CCNA, S.E, Gr`;

            const whatsappURL = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
        }

        // Share via Email
        function shareViaEmail() {
            const currentURL = window.location.href;
            const subject = 'Media Pembelajaran IPS - SMP Negeri 2 Kota Sukabumi';
            const body = `Assalamualaikum siswa-siswi kelas VIII,

Berikut adalah link untuk mengakses Media Pembelajaran IPS:

üîó Link: ${currentURL}

üìö Materi yang akan dipelajari:
1. Karakteristik Geografis dan Keragaman Alam Indonesia
2. Pemanfaatan Sumber Daya Alam Indonesia  
3. Sumber Daya Manusia Indonesia
4. Peran Lembaga Sosial dalam Pemanfaatan Sumber Daya
5. Kondisi Geografis dan Interaksi dengan Bangsa Asing

üì± Cara menggunakan:
1. Klik link di atas atau copy-paste ke browser
2. Isi data siswa (nama, kelas, NIS)
3. Pelajari materi secara berurutan
4. Kerjakan quiz dan evaluasi
5. Lakukan refleksi pembelajaran

‚úÖ Fitur yang tersedia:
‚Ä¢ Pembelajaran interaktif dengan animasi
‚Ä¢ Quiz untuk mengukur pemahaman
‚Ä¢ Progress tracking otomatis
‚Ä¢ Refleksi pembelajaran
‚Ä¢ Laporan progress lengkap

‚ö†Ô∏è Catatan penting:
‚Ä¢ Pastikan mengisi data siswa dengan benar
‚Ä¢ Pelajari materi secara berurutan
‚Ä¢ Kerjakan semua quiz dan evaluasi
‚Ä¢ Isi refleksi dengan lengkap

Selamat belajar! üìñ

Wassalamualaikum,
Engkus Kusnandar, CCNA, S.E, Gr
Guru IPS SMP Negeri 2 Kota Sukabumi`;

            const mailtoURL = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoURL;
        }

        // Copy share link
        function copyShareLink() {
            const currentURL = window.location.href;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(currentURL).then(() => {
                    alert('‚úÖ Link berhasil dicopy!\n\nüìã Link sudah tersimpan di clipboard:\n' + currentURL + '\n\nüì± Cara share:\n‚Ä¢ Paste di WhatsApp grup kelas\n‚Ä¢ Kirim via email\n‚Ä¢ Share di Google Classroom\n‚Ä¢ Tulis di papan tulis');
                }).catch(() => {
                    fallbackCopyLink(currentURL);
                });
            } else {
                fallbackCopyLink(currentURL);
            }
        }

        // Fallback copy method
        function fallbackCopyLink(url) {
            const textArea = document.createElement('textarea');
            textArea.value = url;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                alert('‚úÖ Link berhasil dicopy!\n\nüìã Link: ' + url + '\n\nüì± Silakan paste di WhatsApp atau aplikasi lain untuk share ke siswa.');
            } catch (err) {
                alert('‚ùå Gagal copy link. Silakan copy manual:\n\n' + url);
            }
            
            document.body.removeChild(textArea);
        }

        // Generate batch files for easy distribution
        function generateBatchFiles() {
            try {
                // Create batch file content for Windows
                const batchContent = `@echo off
title Media Pembelajaran IPS - SMP Negeri 2 Sukabumi
echo ========================================
echo   MEDIA PEMBELAJARAN IPS
echo   SMP Negeri 2 Kota Sukabumi
echo ========================================
echo.
echo Starting local server...
echo.
echo Akses dari browser: http://localhost:8000
echo Akses dari HP siswa: http://%COMPUTERNAME%:8000
echo.
echo Tekan Ctrl+C untuk stop server
echo.
python -m http.server 8000
pause`;

                // Create and download batch file
                const blob = new Blob([batchContent], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Start_Media_Pembelajaran.bat';
                a.click();
                window.URL.revokeObjectURL(url);

                // Also create instruction file
                const instructionContent = `PANDUAN PENGGUNAAN MEDIA PEMBELAJARAN IPS
SMP Negeri 2 Kota Sukabumi

UNTUK GURU:
1. Download file HTML media pembelajaran
2. Letakkan file HTML dan file .bat ini dalam folder yang sama
3. Double-click "Start_Media_Pembelajaran.bat"
4. Server akan jalan otomatis
5. Buka browser dan akses: http://localhost:8000
6. Share IP address ke siswa untuk akses dari komputer/HP lain

UNTUK SISWA:
1. Buka browser (Chrome, Firefox, Edge)
2. Ketik alamat yang diberikan guru
3. Isi data siswa (nama, kelas, NIS)
4. Mulai pembelajaran

TROUBLESHOOTING:
- Jika error "python not found": Install Python dari python.org
- Jika port 8000 sudah digunakan: Ganti angka 8000 ke 8001, 8002, dst
- Jika tidak bisa akses dari HP: Cek firewall Windows

KONTAK:
Engkus Kusnandar, CCNA, S.E, Gr
Guru IPS SMP Negeri 2 Kota Sukabumi`;

                const instructionBlob = new Blob([instructionContent], { type: 'text/plain' });
                const instructionUrl = window.URL.createObjectURL(instructionBlob);
                const instructionLink = document.createElement('a');
                instructionLink.href = instructionUrl;
                instructionLink.download = 'PANDUAN_PENGGUNAAN.txt';
                instructionLink.click();
                window.URL.revokeObjectURL(instructionUrl);

                alert('‚úÖ Batch files berhasil dibuat!\n\nüì¶ File yang didownload:\n‚Ä¢ Start_Media_Pembelajaran.bat\n‚Ä¢ PANDUAN_PENGGUNAAN.txt\n\nüéØ Cara menggunakan:\n1. Letakkan semua file dalam folder yang sama\n2. Double-click file .bat untuk start server\n3. Share IP address ke siswa\n\nüí° File batch ini memudahkan setup server untuk lab komputer!');

            } catch (error) {
                alert('‚ùå Error creating batch files: ' + error.message);
            }
        }

        // Detect network information
        function detectNetworkInfo() {
            try {
                // Try to get local IP (limited in browser for security)
                const currentIP = document.getElementById('currentIP');
                
                // This is a simplified detection - in real environment, IP would be detected server-side
                const possibleIPs = [
                    '192.168.1.x (WiFi Router)',
                    '192.168.0.x (Default Router)', 
                    '10.0.0.x (Corporate Network)',
                    '172.16.x.x (Private Network)'
                ];
                
                let ipInfo = 'üåê Kemungkinan IP Network:\n\n';
                possibleIPs.forEach((ip, index) => {
                    ipInfo += `${index + 1}. ${ip}\n`;
                });
                
                ipInfo += '\nüîç Cara cek IP yang tepat:\n';
                ipInfo += '‚Ä¢ Windows: Buka CMD ‚Üí ketik "ipconfig"\n';
                ipInfo += '‚Ä¢ Cari "IPv4 Address"\n';
                ipInfo += '‚Ä¢ Contoh: 192.168.1.100\n\n';
                ipInfo += 'üì± Siswa akses via:\n';
                ipInfo += '‚Ä¢ http://[IP-GURU]:8000\n';
                ipInfo += '‚Ä¢ Contoh: http://192.168.1.100:8000';
                
                currentIP.innerHTML = `
                    <div class="text-xs">
                        <p class="font-medium">Network Detection:</p>
                        <p>Current URL: ${window.location.href}</p>
                        <p>Protocol: ${window.location.protocol}</p>
                        <p>Host: ${window.location.host}</p>
                    </div>
                `;
                
                alert(ipInfo);
                
            } catch (error) {
                alert('‚ùå Error detecting network: ' + error.message);
            }
        }

        // Tab navigation functionality
        document.addEventListener('DOMContentLoaded', function() {
            initDatabase();
            updateComprehensiveStatistics();
            
            // Show multi-device welcome
            showMultiDeviceWelcome();
            
            // Update device info
            document.getElementById('activeDevices').textContent = '1 (' + getDeviceType() + ')';
            
            // Set up periodic activity tracking (every 10 seconds)
            setInterval(() => {
                if (studentProgress.studentInfo.nis) {
                    trackUserActivity();
                }
            }, 10000);
            
            const tabs = document.querySelectorAll('.tab');
            const pages = document.querySelectorAll('.page');

            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const target = this.getAttribute('data-target');
                    
                    // Remove active class from all tabs and pages
                    tabs.forEach(t => t.classList.remove('active'));
                    pages.forEach(p => p.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding page
                    this.classList.add('active');
                    document.getElementById(target).classList.add('active');
                    
                    // Scroll to top
                    window.scrollTo(0, 0);
                });
            });

            // Accordion functionality
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const content = this.nextElementSibling;
                    const icon = this.querySelector('.accordion-icon');
                    
                    if (content.classList.contains('active')) {
                        content.classList.remove('active');
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        content.classList.add('active');
                        icon.style.transform = 'rotate(180deg)';
                    }
                });
            });

            // Quiz functionality
            const quizzes = document.querySelectorAll('.quiz');
            quizzes.forEach(quiz => {
                const options = quiz.querySelectorAll('.quiz-option');
                const checkButton = quiz.querySelector('.check-answers');
                const resultDiv = quiz.querySelector('.result');

                options.forEach(option => {
                    option.addEventListener('click', function() {
                        // Remove selected class from siblings
                        const siblings = this.parentElement.querySelectorAll('.quiz-option');
                        siblings.forEach(sibling => sibling.classList.remove('selected'));
                        
                        // Add selected class to clicked option
                        this.classList.add('selected');
                    });
                });

                if (checkButton) {
                    checkButton.addEventListener('click', function() {
                        let correct = 0;
                        let total = 0;
                        
                        const questions = quiz.querySelectorAll('.quiz-question');
                        questions.forEach(question => {
                            const selectedOption = question.querySelector('.quiz-option.selected');
                            const correctOption = question.querySelector('.quiz-option[data-correct="true"]');
                            
                            total++;
                            
                            if (selectedOption) {
                                if (selectedOption.getAttribute('data-correct') === 'true') {
                                    selectedOption.classList.add('correct');
                                    correct++;
                                } else {
                                    selectedOption.classList.add('incorrect');
                                    correctOption.classList.add('correct');
                                }
                            } else {
                                correctOption.classList.add('correct');
                            }
                        });
                        
                        const percentage = Math.round((correct / total) * 100);
                        let grade = '';
                        let message = '';
                        
                        if (percentage >= 80) {
                            grade = 'Sangat Baik';
                            message = 'Selamat! Anda telah menguasai materi dengan baik.';
                        } else if (percentage >= 70) {
                            grade = 'Baik';
                            message = 'Bagus! Anda cukup menguasai materi.';
                        } else if (percentage >= 60) {
                            grade = 'Cukup';
                            message = 'Anda perlu mempelajari kembali beberapa materi.';
                        } else {
                            grade = 'Kurang';
                            message = 'Silakan pelajari kembali materi dengan lebih teliti.';
                        }
                        
                        resultDiv.innerHTML = `
                            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                <h4 class="font-semibold text-blue-800 mb-2">Hasil Evaluasi</h4>
                                <p>Skor: ${correct}/${total} (${percentage}%)</p>
                                <p>Nilai: ${grade}</p>
                                <p class="mt-2">${message}</p>
                            </div>
                        `;
                        resultDiv.classList.remove('hidden');
                        
                        // Save quiz score to progress with comprehensive tracking
                        const quizId = quiz.id.replace('quiz-', '');
                        if (studentProgress.materials[quizId]) {
                            const scoreText = `${correct}/${total} (${percentage}%)`;
                            studentProgress.materials[quizId].score = scoreText;
                            
                            // Record comprehensive quiz activity
                            recordQuizResult(quizId, {
                                score: correct,
                                total: total,
                                percentage: percentage,
                                grade: grade,
                                answers: getQuizAnswers(quiz),
                                timestamp: new Date().toISOString(),
                                completedAt: new Date().toLocaleString('id-ID')
                            });

                            // Record live activity for real-time display
                            recordLiveActivity('quiz_completion', {
                                materialId: quizId,
                                materialName: getMaterialName(quizId),
                                score: correct,
                                total: total,
                                percentage: percentage,
                                grade: grade
                            });
                            
                            saveProgress();
                            updateProgressDisplay();
                            updateComprehensiveRecord();
                        }
                        
                        // Disable further clicking
                        options.forEach(option => {
                            option.style.pointerEvents = 'none';
                        });
                        checkButton.style.display = 'none';
                    });
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9689566eb6f19c68',t:'MTc1NDA5MzI3My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
